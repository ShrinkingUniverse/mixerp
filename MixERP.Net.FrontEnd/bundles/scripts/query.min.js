window.CodeMirror=function(){"use strict";function n(t,i){var r,o,e,u,s;if(!(this instanceof n))return new n(t,i);this.options=i=i||{};for(r in of)!i.hasOwnProperty(r)&&of.hasOwnProperty(r)&&(i[r]=of[r]);ae(i);o=typeof i.value=="string"?0:i.value.first;e=this.display=ra(t,o);e.wrapper.CodeMirror=this;nh(this);i.autofocus&&!he&&g(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new ss};gs(this);i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");u=i.value;typeof u=="string"&&(u=new w(i.value,i.mode));f(this,gc)(this,u);c&&setTimeout(ut(vt,this,!0),20);ga(this);try{s=document.activeElement==e.input}catch(h){}s||i.autofocus&&!he?setTimeout(ut(ti,this),20):so(this);f(this,function(){var n,t;for(n in ri)ri.propertyIsEnumerable(n)&&ri[n](this,i[n],yo);for(t=0;t<sf.length;++t)sf[t](this)})()}function ra(n,t){var r={},u=r.input=i("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return it?u.style.width="1000px":u.setAttribute("wrap","off"),rr&&(u.style.border="1px solid black"),u.setAttribute("autocorrect","off"),u.setAttribute("autocapitalize","off"),u.setAttribute("spellcheck","false"),r.inputDiv=i("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=i("div",[i("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=i("div",[i("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),r.lineDiv=i("div",null,"CodeMirror-code"),r.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),r.cursor=i("div"," ","CodeMirror-cursor"),r.otherCursor=i("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=i("div",null,"CodeMirror-measure"),r.lineSpace=i("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=i("div",[i("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=i("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=i("div",null,null,"position: absolute; height: "+ei+"px; width: 1px;"),r.gutters=i("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=i("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=i("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),hi&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),n.appendChild?n.appendChild(r.wrapper):n(r.wrapper),rr&&(u.style.width="0px"),it||(r.scroller.draggable=!0),se?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):hi&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ss,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function er(t){t.doc.mode=n.getMode(t.options,t.doc.modeOption);t.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null);n.styles&&(n.styles=null)});t.doc.frontier=t.doc.first;sr(t,100);t.state.modeGen++;t.curOp&&a(t)}function ua(n){n.options.lineWrapping?(n.display.wrapper.className+=" CodeMirror-wrap",n.display.sizer.style.minWidth=""):(n.display.wrapper.className=n.display.wrapper.className.replace(" CodeMirror-wrap",""),le(n));ks(n);a(n);li(n);setTimeout(function(){ve(n)},100)}function bs(n){var t=ai(n.display),i=n.options.lineWrapping,r=i&&Math.max(5,n.display.scroller.clientWidth/oh(n.display)-3);return function(u){return fi(n.doc,u)?0:i?(Math.ceil(u.text.length/r)||1)*t:t}}function ks(n){var t=n.doc,i=bs(n);t.iter(function(n){var t=i(n);t!=n.height&&rt(n,t)})}function ds(n){var t=ot[n.options.keyMap],i=t.style;n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(i?" cm-keymap-"+i:"");n.state.disableInput=t.disableInput}function gs(n){n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+n.options.theme.replace(/(^|\s)\s*/g," cm-s-");li(n)}function or(n){nh(n);a(n);setTimeout(function(){pe(n)},20)}function nh(n){var r=n.display.gutters,e=n.options.gutters,t,u,f;for(re(r),t=0;t<e.length;++t)u=e[t],f=r.appendChild(i("div",null,"CodeMirror-gutter "+u)),u=="CodeMirror-linenumbers"&&(n.display.lineGutter=f,f.style.width=(n.display.lineNumWidth||1)+"px");r.style.display=t?"":"none"}function lu(n,t){var f,e,i,u;if(t.height==0)return 0;for(f=t.text.length,i=t;e=ko(i);)u=e.find(),i=r(n,u.from.line),f+=u.from.ch-u.to.ch;for(i=t;e=af(i);)u=e.find(),f-=i.text.length-u.from.ch,i=r(n,u.to.line),f+=i.text.length-u.to.ch;return f}function le(n){var t=n.display,i=n.doc;t.maxLine=r(i,i.first);t.maxLineLength=lu(i,t.maxLine);t.maxLineChanged=!0;i.iter(function(n){var r=lu(i,n);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=n)})}function ae(n){for(var i=!1,t=0;t<n.gutters.length;++t)n.gutters[t]=="CodeMirror-linenumbers"&&(n.lineNumbers?i=!0:n.gutters.splice(t--,1));!i&&n.lineNumbers&&n.gutters.push("CodeMirror-linenumbers")}function ve(n){var t=n.display,e=n.doc.height,r=e+rh(t);t.sizer.style.minHeight=t.heightForcer.style.top=r+"px";t.gutters.style.height=Math.max(r,t.scroller.clientHeight-ei)+"px";var f=Math.max(r,t.scroller.scrollHeight),i=t.scroller.scrollWidth>t.scroller.clientWidth+1,u=f>t.scroller.clientHeight+1;u?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=i?hu(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=f-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="";i?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=u?hu(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="";i&&u?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=hu(t.measure)+"px"):t.scrollbarFiller.style.display="";i&&n.options.coverGutterNextToScrollbar&&n.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=hu(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="";gl&&hu(t.measure)===0&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=na?"18px":"12px")}function ye(n,t,i){var r=n.scroller.scrollTop,u=n.wrapper.clientHeight,f;return typeof i=="number"?r=i:i&&(r=i.top,u=i.bottom-i.top),r=Math.floor(r-ih(n)),f=Math.ceil(r+u),{from:ru(t,r),to:ru(t,f)}}function pe(n){var t=n.display,i,r,u;if(t.alignWidgets||t.gutters.firstChild&&n.options.fixedGutter){var f=be(t)-t.scroller.scrollLeft+n.doc.scrollLeft,e=t.gutters.offsetWidth,o=f+"px";for(i=t.lineDiv.firstChild;i;i=i.nextSibling)if(i.alignable)for(r=0,u=i.alignable;r<u.length;++r)u[r].style.left=o;n.options.fixedGutter&&(t.gutters.style.left=f+e+"px")}}function fa(n){if(!n.options.lineNumbers)return!1;var u=n.doc,r=we(n.options,u.first+u.size-1),t=n.display;if(r.length!=t.lineNumChars){var f=t.measure.appendChild(i("div",[i("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=f.firstChild.offsetWidth,o=f.offsetWidth-e;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(e,t.lineGutter.offsetWidth-o),t.lineNumWidth=t.lineNumInnerWidth+o,t.lineNumChars=t.lineNumInnerWidth?r.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",!0}return!1}function we(n,t){return String(n.lineNumberFormatter(t+n.firstLineNumber))}function be(n){return l(n.scroller).left-l(n.sizer).left}function au(n,t,i){for(var f=n.display.showingFrom,e=n.display.showingTo,u,r=ye(n.display,n.doc,i);;){if(!ea(n,t,r))break;if(u=!0,de(n),ve(n),i&&(i=Math.min(n.display.scroller.scrollHeight-n.display.scroller.clientHeight,typeof i=="number"?i:i.top)),r=ye(n.display,n.doc,i),r.from>=n.display.showingFrom&&r.to<=n.display.showingTo)break;t=[]}return u&&(k(n,"update",n),(n.display.showingFrom!=f||n.display.showingTo!=e)&&k(n,"viewportChange",n,n.display.showingFrom,n.display.showingTo)),u}function ea(n,t,i){var u=n.display,e=n.doc,ft,k,h,et,d,b,c,y,ot,g,a,v,nt,it,ut,p,f;if(!u.wrapper.clientWidth){u.showingFrom=u.showingTo=e.first;u.viewOffset=0;return}if(t.length!=0||!(i.from>u.showingFrom)||!(i.to<u.showingTo)){if(fa(n)&&(t=[{from:e.first,to:e.first+e.size}]),ft=u.sizer.style.marginLeft=u.gutters.offsetWidth+"px",u.scrollbarH.style.left=n.options.fixedGutter?ft:"0",k=Infinity,n.options.lineNumbers)for(f=0;f<t.length;++f)if(t[f].diff){k=t[f].from;break}var w=e.first+e.size,s=Math.max(i.from-n.options.viewportMargin,e.first),o=Math.min(w,i.to+n.options.viewportMargin);if(u.showingFrom<s&&s-u.showingFrom<20&&(s=Math.max(e.first,u.showingFrom)),u.showingTo>o&&u.showingTo-o<20&&(o=Math.min(w,u.showingTo)),fr)for(s=tt(wt(e,r(e,s)));o<w&&fi(e,r(e,o));)++o;if(h=[{from:Math.max(u.showingFrom,e.first),to:Math.min(u.showingTo,w)}],h=h[0].from>=h[0].to?[]:oa(h,t),fr)for(f=0;f<h.length;++f)for(c=h[f];et=af(r(e,c.to-1));)if(d=et.find().from.line,d>c.from)c.to=d;else{h.splice(f--,1);break}for(b=0,f=0;f<h.length;++f)c=h[f],c.from<s&&(c.from=s),c.to>o&&(c.to=o),c.from>=c.to?h.splice(f--,1):b+=c.to-c.from;if(b==o-s&&s==u.showingFrom&&o==u.showingTo){th(n);return}h.sort(function(n,t){return n.from-t.from});try{y=document.activeElement}catch(st){}for(b<(o-s)*.7&&(u.lineDiv.style.display="none"),ha(n,s,o,h,k),u.lineDiv.style.display="",y&&document.activeElement!=y&&y.offsetHeight&&y.focus(),ot=s!=u.showingFrom||o!=u.showingTo||u.lastSizeC!=u.wrapper.clientHeight,ot&&(u.lastSizeC=u.wrapper.clientHeight,sr(n,400)),u.showingFrom=s,u.showingTo=o,g=u.lineDiv.offsetTop,a=u.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj&&(hi?(nt=a.offsetTop+a.offsetHeight,v=nt-g,g=nt):(it=l(a),v=it.bottom-it.top),ut=a.lineObj.height-v,v<2&&(v=ai(u)),(ut>.001||ut<-.001)&&(rt(a.lineObj,v),p=a.lineObj.widgets,p)))for(f=0;f<p.length;++f)p[f].height=p[f].node.offsetHeight;return th(n),!0}}function th(n){var t=n.display.viewOffset=bf(n,r(n.doc,n.display.showingFrom));n.display.mover.style.top=t+"px"}function oa(n,t){for(var o,h,i,f=0,s=t.length||0;f<s;++f){var r=t[f],u=[],e=r.diff||0;for(o=0,h=n.length;o<h;++o)i=n[o],r.to<=i.from&&r.diff?u.push({from:i.from+e,to:i.to+e}):r.to<=i.from||r.from>=i.to?u.push(i):(r.from>i.from&&u.push({from:i.from,to:r.from}),r.to<i.to&&u.push({from:r.to+e,to:i.to+e}));n=u}return n}function sa(n){for(var i=n.display,u={},f={},t=i.gutters.firstChild,r=0;t;t=t.nextSibling,++r)u[n.options.gutters[r]]=t.offsetLeft,f[n.options.gutters[r]]=t.offsetWidth;return{fixedPos:be(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:u,gutterWidth:f,wrapperWidth:i.wrapper.clientWidth}}function ha(n,t,r,u,f){function c(t){var i=t.nextSibling;return it&&ci&&n.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),i}var l=sa(n),a=n.display,v=n.options.lineNumbers,h,e,s,o;for(u.length||it&&n.display.currentWheelTarget||re(a.lineDiv),h=a.lineDiv,e=h.firstChild,s=u.shift(),o=t,n.doc.iter(t,r,function(t){var p,y,r,w,d,g,a,b,k;if(s&&s.to==o&&(s=u.shift()),fi(n.doc,t)){if(t.height!=0&&rt(t,0),t.widgets&&e.previousSibling)for(p=0;p<t.widgets.length;++p)y=t.widgets[p],y.showIfHidden&&(r=e.previousSibling,/pre/i.test(r.nodeName)&&(w=i("div",null,null,"position: relative"),r.parentNode.replaceChild(w,r),w.appendChild(r),r=w),d=r.appendChild(i("div",[y.node],"CodeMirror-linewidget")),y.handleMouseEvents||(d.ignoreEvents=!0),ke(y,d,r,l))}else if(s&&s.from<=o&&s.to>o){while(e.lineObj!=t)e=c(e);v&&f<=o&&e.lineNumber&&al(e.lineNumber,we(n.options,o));e=e.nextSibling}else{if(t.widgets)for(g=0,a=e;a&&g<20;++g,a=a.nextSibling)if(a.lineObj==t&&/div/i.test(a.nodeName)){b=a;break}if(k=ca(n,t,o,l,b),k!=b)h.insertBefore(k,e);else{while(e!=b)e=c(e);e=e.nextSibling}k.lineObj=t}++o});e;)e=c(e)}function ca(n,t,r,u,f){var y=ts(n,t),c=t.gutterMarkers,rt=n.display,e,s,tt,it,l,p,a,w,h,b,o,v;if(!n.options.lineNumbers&&!c&&!t.bgClass&&!t.wrapClass&&!t.widgets)return y;if(f){f.alignable=null;var d=!0,g=0,nt=null;for(s=f.firstChild;s;s=tt)if(tt=s.nextSibling,/\bCodeMirror-linewidget\b/.test(s.className)){for(h=0,it=!0;h<t.widgets.length;++h)if(o=t.widgets[h],o.above||(nt=s,it=!1),o.node==s.firstChild){ke(o,s,f,u);++g;break}if(h==t.widgets.length){d=!1;break}}else f.removeChild(s);f.insertBefore(y,nt);d&&g==t.widgets.length&&(e=f,f.className=t.wrapClass||"")}if(e||(e=i("div",null,t.wrapClass,"position: relative"),e.appendChild(y)),t.bgClass&&e.insertBefore(i("div",null,t.bgClass+" CodeMirror-linebackground"),e.firstChild),(n.options.lineNumbers||c)&&(l=e.insertBefore(i("div",null,null,"position: absolute; left: "+(n.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px"),e.firstChild),n.options.fixedGutter&&(e.alignable||(e.alignable=[])).push(l),!n.options.lineNumbers||c&&c["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(i("div",we(n.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+rt.lineNumInnerWidth+"px"))),c))for(p=0;p<n.options.gutters.length;++p)a=n.options.gutters[p],w=c.hasOwnProperty(a)&&c[a],w&&l.appendChild(i("div",[w],"CodeMirror-gutter-elt","left: "+u.gutterLeft[a]+"px; width: "+u.gutterWidth[a]+"px"));if(hi&&(e.style.zIndex=2),t.widgets&&e!=f)for(h=0,b=t.widgets;h<b.length;++h)o=b[h],v=i("div",[o.node],"CodeMirror-linewidget"),o.handleMouseEvents||(v.ignoreEvents=!0),ke(o,v,e,u),o.above?e.insertBefore(v,n.options.lineNumbers&&t.height!=0?l:y):e.appendChild(v),k(o,"redraw");return e}function ke(n,t,i,r){if(n.noHScroll){(i.alignable||(i.alignable=[])).push(t);var u=r.wrapperWidth;t.style.left=r.fixedPos+"px";n.coverGutter||(u-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px");t.style.width=u+"px"}n.coverGutter&&(t.style.zIndex=5,t.style.position="relative",n.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function de(n){var t=n.display,i=s(n.doc.sel.from,n.doc.sel.to);if(i||n.options.showCursorWhenSelecting?la(n):t.cursor.style.display=t.otherCursor.style.display="none",i?t.selectionDiv.style.display="none":aa(n),n.options.moveInputWithCursor){var r=et(n,n.doc.sel.head,"div"),u=l(t.wrapper),f=l(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+f.top-u.top))+"px";t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+f.left-u.left))+"px"}}function la(n){var t=n.display,i=et(n,n.doc.sel.head,"div");t.cursor.style.left=i.left+"px";t.cursor.style.top=i.top+"px";t.cursor.style.height=Math.max(0,i.bottom-i.top)*n.options.cursorHeight+"px";t.cursor.style.display="";i.other?(t.otherCursor.style.display="",t.otherCursor.style.left=i.other.left+"px",t.otherCursor.style.top=i.other.top+"px",t.otherCursor.style.height=(i.other.bottom-i.other.top)*.85+"px"):t.otherCursor.style.display="none"}function aa(n){function e(n,t,r,u){t<0&&(t=0);v.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+n+"px; top: "+t+"px; width: "+(r==null?y-n:r)+"px; height: "+(u-t)+"px"))}function l(i,u,f){function v(r,u){return ro(n,t(i,r),"div",l,u)}var l=r(h,i),a=l.text.length,o,c;return oy(st(l),u||0,f==null?a:f,function(n,t,i){var r=v(n,"left"),h,l,p,w;n==t?(h=r,l=p=r.left):(h=v(t-1,"right"),i=="rtl"&&(w=r,r=h,h=w),l=r.left,p=h.right);u==null&&n==0&&(l=s);h.top-r.top>3&&(e(l,r.top,null,r.bottom),l=s,r.bottom<h.top&&e(l,r.bottom,null,h.top));f==null&&t==a&&(p=y);(!o||r.top<o.top||r.top==o.top&&r.left<o.left)&&(o=r);(!c||h.bottom>c.bottom||h.bottom==c.bottom&&h.right>c.right)&&(c=h);l<s+1&&(l=s);e(l,h.top,p-l,h.bottom)}),{start:o,end:c}}var c=n.display,h=n.doc,u=n.doc.sel,v=document.createDocumentFragment(),y=c.lineSpace.offsetWidth,s=pa(n.display);if(u.from.line==u.to.line)l(u.from.line,u.from.ch,u.to.ch);else{var p=r(h,u.from.line),w=r(h,u.to.line),a=wt(h,p)==wt(h,w),f=l(u.from.line,u.from.ch,a?p.text.length:null).end,o=l(u.to.line,a?0:null,u.to.ch).start;a&&(f.top<o.top-2?(e(f.right,f.top,null,f.bottom),e(s,o.top,o.left,o.bottom)):e(f.right,f.top,o.left-f.right,f.bottom));f.bottom<o.top&&e(s,f.bottom,null,o.top)}ht(c.selectionDiv,v);c.selectionDiv.style.display=""}function vu(n){var t,i;n.state.focused&&(t=n.display,clearInterval(t.blinker),i=!0,t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(i=!i)?"":"hidden"},n.options.cursorBlinkRate))}function sr(n,t){n.doc.mode.startState&&n.doc.frontier<n.display.showingTo&&n.state.highlight.set(t,ut(va,n))}function va(n){var t=n.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=n.display.showingTo)){var e=+new Date+n.options.workTime,r=gi(t.mode,hr(n,t.frontier)),i=[],u;t.iter(t.frontier,Math.min(t.first+t.size,n.display.showingTo+500),function(f){var o,h,s;if(t.frontier>=n.display.showingFrom){for(o=f.styles,f.styles=ac(n,f,r),h=!o||o.length!=f.styles.length,s=0;!h&&s<o.length;++s)h=o[s]!=f.styles[s];h&&(u&&u.end==t.frontier?u.end++:i.push(u={start:t.frontier,end:t.frontier+1}));f.stateAfter=gi(t.mode,r)}else yc(n,f,r),f.stateAfter=t.frontier%5==0?gi(t.mode,r):null;return++t.frontier,+new Date>e?(sr(n,n.options.workDelay),!0):void 0});i.length&&f(n,function(){for(var n=0;n<i.length;++n)a(this,i[n].start,i[n].end)})()}}function ya(n,t,i){for(var o,s,h,e,f=n.doc,u=t,c=t-100;u>c;--u){if(u<=f.first)return f.first;if(o=r(f,u-1),o.stateAfter&&(!i||u<=f.frontier))return u;s=tr(o.text,null,n.options.tabSize);(e==null||h>s)&&(e=u-1,h=s)}return e}function hr(n,t,i){var f=n.doc,o=n.display,u,e;return f.mode.startState?(u=ya(n,t,i),e=u>f.first&&r(f,u-1).stateAfter,e=e?gi(f.mode,e):uc(f.mode),f.iter(u,t,function(i){yc(n,i,e);var r=u==t-1||u%5==0||u>=o.showingFrom&&u<o.showingTo;i.stateAfter=r?gi(f.mode,e):null;++u}),e):!0}function ih(n){return n.lineSpace.offsetTop}function rh(n){return n.mover.offsetHeight-n.lineSpace.offsetHeight}function pa(n){var t=ht(n.measure,i("pre",null,null,"text-align: left")).appendChild(i("span","x"));return t.offsetLeft}function ge(n,t,i,r,u){var o=-1,e,f,s;for(r=r||to(n,t),e=i;;e+=o){if(f=r[e],f)break;o<0&&e==0&&(o=1)}return s=(e<i||u=="right")&&f.topRight!=null,{left:e<i?f.right:f.left,right:e>i?f.left:f.right,top:s?f.topRight:f.top,bottom:s?f.bottomRight:f.bottom}}function no(n,t){for(var i,u=n.display.measureLineCache,r=0;r<u.length;++r)if(i=u[r],i.text==t.text&&i.markedSpans==t.markedSpans&&n.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.bgClass+"|"+t.wrapClass)return i}function wa(n,t){var i=no(n,t);i&&(i.text=i.measure=i.markedSpans=null)}function to(n,t){var r=no(n,t);if(r)return r.measure;var u=ba(n,t),i=n.display.measureLineCache,f={text:t.text,width:n.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:u,classes:t.textClass+"|"+t.bgClass+"|"+t.wrapClass};return i.length==16?i[++n.display.measureLineCachePos%16]=f:i.push(f),u}function ba(n,t){function nt(n,t){var i,r,u;for(t>st&&(t=st),n<0&&(n=0),i=0;i<e.length;i+=2)if((r=e[i],u=e[i+1],!(r>t)&&!(u<n))&&(r<=n&&u>=t||n<=r&&t>=u||Math.min(t,u)-Math.max(n,r)>=t-n>>1))return e[i]=Math.min(n,r),e[i+1]=Math.max(t,u),i;return e.push(n,t),i}var a=n.display,w=hl(t.text.length),o=ts(n,t,w),ot,k,g,h,v,ct,lt,at,rt,u,r,ut,p;if(c&&!hi&&!n.options.lineWrapping&&o.childNodes.length>100){var ft=document.createDocumentFragment(),et=10,b=o.childNodes.length;for(u=0,ot=Math.ceil(b/et);u<ot;++u){for(k=i("div",null,null,"display: inline-block"),g=0;g<et&&b;++g)k.appendChild(o.firstChild),--b;ft.appendChild(k)}o.appendChild(ft)}ht(a.measure,o);var f=l(a.lineDiv),e=[],s=hl(t.text.length),st=o.offsetHeight;for(d&&a.measure.first!=o&&ht(a.measure,o),u=0;u<w.length;++u)if(r=w[u]){if(v=r,/\bCodeMirror-widget\b/.test(r.className)&&r.getClientRects){r.firstChild.nodeType==1&&(v=r.firstChild);var y=v.getClientRects(),tt=y[0],it=y[y.length-1];if(y.length>1){ct=nt(tt.top-f.top,tt.bottom-f.top);lt=nt(it.top-f.top,it.bottom-f.top);s[u]={left:tt.left-f.left,right:it.right-f.left,top:ct,topRight:lt};continue}}h=l(v);at=nt(h.top-f.top,h.bottom-f.top);rt=h.right;r.measureRight&&(rt=l(r.measureRight).left);s[u]={left:h.left-f.left,right:rt-f.left,top:at}}for(u=0;u<s.length;++u)(r=s[u])&&(ut=r.top,p=r.topRight,r.top=e[ut],r.bottom=e[ut+1],p!=null&&(r.topRight=e[p],r.bottomRight=e[p+1]));return s}function ka(n,t){var e=!1,i,r,u,f,o;if(t.markedSpans)for(i=0;i<t.markedSpans;++i)r=t.markedSpans[i],r.collapsed&&(r.to==null||r.to==t.text.length)&&(e=!0);return(u=!e&&no(n,t),u)?ge(n,t,t.text.length,u.measure,"right").right:(f=ts(n,t),o=f.appendChild(cu(n.display.measure)),ht(n.display.measure,f),l(o).right-l(n.display.lineDiv).left)}function li(n){n.display.measureLineCache.length=n.display.measureLineCachePos=0;n.display.cachedCharWidth=n.display.cachedTextHeight=null;n.options.lineWrapping||(n.display.maxLineChanged=!0);n.display.lineNumChars=null}function uh(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fh(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function io(n,t,i,r){var f,e,u,o,s;if(t.widgets)for(f=0;f<t.widgets.length;++f)t.widgets[f].above&&(e=yf(t.widgets[f]),i.top+=e,i.bottom+=e);return r=="line"?i:(r||(r="local"),u=bf(n,t),r=="local"?u+=ih(n.display):u-=n.display.viewOffset,(r=="page"||r=="window")&&(o=l(n.display.lineSpace),u+=o.top+(r=="window"?0:fh()),s=o.left+(r=="window"?0:uh()),i.left+=s,i.right+=s),i.top+=u,i.bottom+=u,i)}function eh(n,t,i){var r,u,f,e;return i=="div"?t:(r=t.left,u=t.top,i=="page"?(r-=uh(),u-=fh()):i!="local"&&i||(f=l(n.display.sizer),r+=f.left,u+=f.top),e=l(n.display.lineSpace),{left:r-e.left,top:u-e.top})}function ro(n,t,i,u,f){return u||(u=r(n.doc,t.line)),io(n,u,ge(n,u,t.ch,null,f),i)}function et(n,t,i,u,f){function s(t,r){var e=ge(n,u,t,f,r?"right":"left");return r?e.left=e.right:e.right=e.left,io(n,u,e,i)}function c(n,t){var i=e[t],r=i.level%2;return(n==cs(i)&&t&&i.level<e[t-1].level?(i=e[--t],n=ls(i)-(i.level%2?0:1),r=!0):n==ls(i)&&t<e.length-1&&i.level<e[t+1].level&&(i=e[++t],n=cs(i)-i.level%2,r=!1),r&&n==i.to&&n>i.from)?s(n-1):s(n,r)}var e,o,l,h;return(u=u||r(n.doc,t.line),f||(f=to(n,u)),e=st(u),o=t.ch,!e)?s(o):(l=as(e,o),h=c(o,l),ir!=null&&(h.other=c(o,ir)),h)}function yu(n,i,r,u){var f=new t(n,i);return f.xRel=u,r&&(f.outside=!0),f}function uo(n,t,i){var u=n.doc,f,o;if(i+=n.display.viewOffset,i<0)return yu(u.first,0,!0,-1);if(f=ru(u,i),o=u.first+u.size-1,f>o)return yu(u.first+u.size-1,r(u,o).text.length,!0,1);for(t<0&&(t=0);;){var c=r(u,f),e=da(n,c,f,t,i),s=af(c),h=s&&s.find();if(s&&(e.ch>h.from.ch||e.ch==h.from.ch&&e.xRel>0))f=h.to.line;else return e}}function da(n,i,r,u,f){function p(u){var f=et(n,t(r,u),"line",i,rt);return(h=!0,g>f.bottom)?f.left-nt:g<f.top?f.left+nt:(h=!1,f.left)}var g=f-bf(n,i),h=!1,nt=2*n.display.wrapper.clientWidth,rt=to(n,i),tt=st(i),w=i.text.length,e=fe(i),o=ee(i),v=p(e),it=h,l=p(o),b=h,c,k,a,s,d,y;if(u>l)return yu(r,o,b,1);for(;;){if(tt?o==e||o==ys(i,e,1):o-e<=1){for(c=u<v||u-v<=l-u?e:o,k=u-(c==e?v:l);ie.test(i.text.charAt(c));)++c;return yu(r,c,c==e?it:b,k<0?-1:k?1:0)}if(a=Math.ceil(w/2),s=e+a,tt)for(s=e,d=0;d<a;++d)s=ys(i,s,1);y=p(s);y>u?(o=s,l=y,(b=h)&&(l+=1e3),w=a):(e=s,v=y,it=h,w-=a)}}function ai(n){var r,t;if(n.cachedTextHeight!=null)return n.cachedTextHeight;if(gt==null){for(gt=i("pre"),r=0;r<49;++r)gt.appendChild(document.createTextNode("x")),gt.appendChild(i("br"));gt.appendChild(document.createTextNode("x"))}return ht(n.measure,gt),t=gt.offsetHeight/50,t>3&&(n.cachedTextHeight=t),re(n.measure),t||1}function oh(n){var r,u,t;return n.cachedCharWidth!=null?n.cachedCharWidth:(r=i("span","x"),u=i("pre",[r]),ht(n.measure,u),t=r.offsetWidth,t>2&&(n.cachedCharWidth=t),t||10)}function vi(n){n.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++sh};eu++||(bt=[])}function yi(n){var t=n.curOp,h=n.doc,i=n.display,a,l,f,v,e,o,s,c,r;if(n.curOp=null,t.updateMaxLine&&le(n),i.maxLineChanged&&!n.options.lineWrapping&&i.maxLine&&(a=ka(n,i.maxLine),i.sizer.style.minWidth=Math.max(0,a+3+ei)+"px",i.maxLineChanged=!1,l=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth),l<h.scrollLeft&&!t.updateScrollPos&&pi(n,Math.min(i.scroller.scrollLeft,l),!0)),t.updateScrollPos?f=t.updateScrollPos:t.selectionChanged&&i.scroller.clientHeight&&(e=et(n,h.sel.head),f=rf(n,e.left,e.top,e.left,e.bottom)),(t.changes.length||f&&f.scrollTop!=null)&&(v=au(n,t.changes,f&&f.scrollTop),n.display.scroller.offsetHeight&&(n.doc.scrollTop=n.display.scroller.scrollTop)),!v&&t.selectionChanged&&de(n),t.updateScrollPos?(i.scroller.scrollTop=i.scrollbarV.scrollTop=h.scrollTop=f.scrollTop,i.scroller.scrollLeft=i.scrollbarH.scrollLeft=h.scrollLeft=f.scrollLeft,pe(n),t.scrollToPos&&tc(n,u(n.doc,t.scrollToPos),t.scrollToPosMargin)):f&&ov(n),t.selectionChanged&&vu(n),n.state.focused&&t.updateInput&&vt(n,t.userSelChange),o=t.maybeHiddenMarkers,s=t.maybeUnhiddenMarkers,o)for(r=0;r<o.length;++r)o[r].lines.length||p(o[r],"hide");if(s)for(r=0;r<s.length;++r)s[r].lines.length&&p(s[r],"unhide");if(--eu||(c=bt,bt=null),t.textChanged&&p(n,"change",n,t.textChanged),t.cursorActivity&&p(n,"cursorActivity",n),c)for(r=0;r<c.length;++r)c[r]()}function f(n,t){return function(){var i=n||this,r=!i.curOp,u;r&&vi(i);try{u=t.apply(i,arguments)}finally{r&&yi(i)}return u}}function cr(n){return function(){var t=this.cm&&!this.cm.curOp,i;t&&vi(this.cm);try{i=n.apply(this,arguments)}finally{t&&yi(this.cm)}return i}}function fo(n,t){var i=!n.curOp,r;i&&vi(n);try{r=t()}finally{i&&yi(n)}return r}function a(n,t,i,r){t==null&&(t=n.doc.first);i==null&&(i=n.doc.first+n.doc.size);n.curOp.changes.push({from:t,to:i,diff:r})}function pu(n){n.display.pollingFast||n.display.poll.set(n.options.pollInterval,function(){eo(n);n.state.focused&&pu(n)})}function lr(n){function i(){var r=eo(n);r||t?(n.display.pollingFast=!1,pu(n)):(t=!0,n.display.poll.set(60,i))}var t=!1;n.display.pollingFast=!0;n.display.poll.set(20,i)}function eo(n){var l=n.display.input,o=n.display.prevInput,y=n.doc,h=y.sel,i,a,u,p,e,f,w,v;if(!n.state.focused||ey(l)||ar(n)||n.state.disableInput||(i=l.value,i==o&&s(h.from,h.to)))return!1;if(c&&!d&&n.display.inputHasSelection===i)return vt(n,!0),!1;for(a=!n.curOp,a&&vi(n),h.shift=!1,u=0,p=Math.min(o.length,i.length);u<p&&o.charCodeAt(u)==i.charCodeAt(u);)++u;return e=h.from,f=h.to,u<o.length?e=t(e.line,e.ch-(o.length-u)):n.state.overwrite&&s(e,f)&&!n.state.pasteIncoming&&(f=t(f.line,Math.min(r(y,f.line).text.length,f.ch+(i.length-u)))),w=n.curOp.updateInput,v={from:e,to:f,text:dt(i.slice(u)),origin:n.state.pasteIncoming?"paste":"+input"},wi(n.doc,v,"end"),n.curOp.updateInput=w,k(n,"inputRead",n,v),i.length>1e3||i.indexOf("\n")>-1?l.value=n.display.prevInput="":n.display.prevInput=i,a&&yi(n),n.state.pasteIncoming=!1,!0}function vt(n,t){var r,f,i=n.doc,u;s(i.sel.from,i.sel.to)?t&&(n.display.prevInput=n.display.input.value="",c&&!d&&(n.display.inputHasSelection=null)):(n.display.prevInput="",r=yl&&(i.sel.to.line-i.sel.from.line>100||(f=n.getSelection()).length>1e3),u=r?"-":f||n.getSelection(),n.display.input.value=u,n.state.focused&&ol(n.display.input),c&&!d&&(n.display.inputHasSelection=u));n.display.inaccurateSelection=r}function g(n){n.options.readOnly=="nocursor"||he&&document.activeElement==n.display.input||n.display.input.focus()}function ar(n){return n.options.readOnly||n.doc.cantEdit}function ga(n){function u(){n.state.focused&&setTimeout(ut(g,n),0)}function o(){i==null&&(i=setTimeout(function(){i=null;t.cachedCharWidth=t.cachedTextHeight=su=null;li(n);fo(n,ut(a,n))},100))}function s(){for(var n=t.wrapper.parentNode;n&&n!=document.body;n=n.parentNode);n?setTimeout(s,5e3):ct(window,"resize",o)}function h(t){lt(n,t)||n.options.onDragEvent&&n.options.onDragEvent(n,uu(t))||fu(t)}function l(){t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,t.input.value=n.getSelection(),ol(t.input))}var t=n.display,i;e(t.scroller,"mousedown",f(n,nv));c?e(t.scroller,"dblclick",f(n,function(t){var i,u;lt(n,t)||(i=vr(n,t),!i||hh(n,t)||ni(n.display,t))||(v(t),u=vo(r(n.doc,i.line).text,i),y(n.doc,u.from,u.to))})):e(t.scroller,"dblclick",function(t){lt(n,t)||v(t)});e(t.lineSpace,"selectstart",function(n){ni(t,n)||v(n)});ce||e(t.scroller,"contextmenu",function(t){ph(n,t)});e(t.scroller,"scroll",function(){t.scroller.clientHeight&&(yr(n,t.scroller.scrollTop),pi(n,t.scroller.scrollLeft,!0),p(n,"scroll",n))});e(t.scrollbarV,"scroll",function(){t.scroller.clientHeight&&yr(n,t.scrollbarV.scrollTop)});e(t.scrollbarH,"scroll",function(){t.scroller.clientHeight&&pi(n,t.scrollbarH.scrollLeft)});e(t.scroller,"mousewheel",function(t){ch(n,t)});e(t.scroller,"DOMMouseScroll",function(t){ch(n,t)});e(t.scrollbarH,"mousedown",u);e(t.scrollbarV,"mousedown",u);e(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0});e(window,"resize",o);setTimeout(s,5e3);e(t.input,"keyup",f(n,function(t){lt(n,t)||n.options.onKeyEvent&&n.options.onKeyEvent(n,uu(t))||t.keyCode==16&&(n.doc.sel.shift=!1)}));e(t.input,"input",ut(lr,n));e(t.input,"keydown",f(n,yh));e(t.input,"keypress",f(n,uv));e(t.input,"focus",ut(ti,n));e(t.input,"blur",ut(so,n));n.options.dragDrop&&(e(t.scroller,"dragstart",function(t){iv(n,t)}),e(t.scroller,"dragenter",h),e(t.scroller,"dragover",h),e(t.scroller,"drop",f(n,tv)));e(t.scroller,"paste",function(i){ni(t,i)||(g(n),lr(n))});e(t.input,"paste",function(){n.state.pasteIncoming=!0;lr(n)});e(t.input,"cut",l);e(t.input,"copy",l);se&&e(t.sizer,"mouseup",function(){document.activeElement==t.input&&t.input.blur();g(n)})}function ni(n,t){for(var i=es(t);i!=n.wrapper;i=i.parentNode)if(!i||i.ignoreEvents||i.parentNode==n.sizer&&i!=n.mover)return!0}function vr(n,t,i){var r=n.display,u,e,o,f;if(!i&&(u=es(t),u==r.scrollbarH||u==r.scrollbarH.firstChild||u==r.scrollbarV||u==r.scrollbarV.firstChild||u==r.scrollbarFiller||u==r.gutterFiller))return null;f=l(r.lineSpace);try{e=t.clientX;o=t.clientY}catch(t){return null}return uo(n,e-f.left,o-f.top)}function nv(n){function pt(n){if(!s(vt,n)){if(vt=n,w=="single"){y(i.doc,u(p,o),n);return}if(d=u(p,d),rt=u(p,rt),w=="double"){var f=vo(r(p,n.line).text,n);h(n,d)?y(i.doc,f.from,rt):y(i.doc,d,f.to)}else w=="triple"&&(h(n,d)?y(i.doc,rt,u(p,t(n.line,0))):y(i.doc,d,u(p,t(n.line+1,0))))}}function st(n){var e=++tt,t=vr(i,n,!0),r,u;t&&(s(t,et)?(u=n.clientY<ot.top?-20:n.clientY>ot.bottom?20:0,u&&setTimeout(f(i,function(){tt==e&&(a.scroller.scrollTop+=u,st(n))}),50)):(i.state.focused||ti(i),et=t,pt(t),r=ye(a,p),(t.line>=r.to||t.line<r.from)&&setTimeout(f(i,function(){tt==e&&st(n)}),150)))}function yt(n){tt=Infinity;v(n);g(i);ct(document,"mousemove",ht);ct(document,"mouseup",at)}var o,nt,w,ft,et,k,ot,tt,ht,at;if(!lt(this,n)){var i=this,a=i.display,p=i.doc,b=p.sel;if(b.shift=n.shiftKey,ni(a,n)){it||(a.scroller.draggable=!1,setTimeout(function(){a.scroller.draggable=!0},100));return}if(!hh(i,n)){o=vr(i,n);switch(fl(n)){case 3:ce&&ph.call(i,i,n);return;case 2:o&&y(i.doc,o);setTimeout(ut(g,i),20);v(n);return}if(!o){es(n)==a.scroller&&v(n);return}if(i.state.focused||ti(i),nt=+new Date,w="single",bu&&bu.time>nt-400&&s(bu.pos,o)?(w="triple",v(n),setTimeout(ut(g,i),20),hv(i,o.line)):wu&&wu.time>nt-400&&s(wu.pos,o)?(w="double",bu={time:nt,pos:o},v(n),ft=vo(r(p,o.line).text,o),y(i.doc,ft.from,ft.to)):wu={time:nt,pos:o},et=o,i.options.dragDrop&&vl&&!ar(i)&&!s(b.from,b.to)&&!h(o,b.from)&&!h(b.to,o)&&w=="single"){k=f(i,function(t){it&&(a.scroller.draggable=!1);i.state.draggingText=!1;ct(document,"mouseup",k);ct(a.scroller,"drop",k);Math.abs(n.clientX-t.clientX)+Math.abs(n.clientY-t.clientY)<10&&(v(t),y(i.doc,o),g(i))});it&&(a.scroller.draggable=!0);i.state.draggingText=k;a.scroller.dragDrop&&a.scroller.dragDrop();e(document,"mouseup",k);e(a.scroller,"drop",k);return}v(n);w=="single"&&y(i.doc,u(p,o));var d=b.from,rt=b.to,vt=o;ot=l(a.wrapper);tt=0;ht=f(i,function(n){c||fl(n)?st(n):yt(n)});at=f(i,yt);e(document,"mousemove",ht);e(document,"mouseup",at)}}}function hh(n,t){var r=n.display,f,u,e,i,o,s,h;try{f=t.clientX;u=t.clientY}catch(t){return!1}if(f>=Math.floor(l(r.gutters).right))return!1;if((v(t),!kt(n,"gutterClick"))||(e=l(r.lineDiv),u>e.bottom))return!0;for(u-=e.top-r.viewOffset,i=0;i<n.options.gutters.length;++i)if(o=r.gutters.childNodes[i],o&&l(o).right>=f){s=ru(n.doc,u);h=n.options.gutters[i];k(n,"gutterClick",n,s,h,t);break}return!0}function tv(n){var t=this,i,r,e,f,s,l;if(!lt(t,n)&&!ni(t.display,n)&&(!t.options.onDragEvent||!t.options.onDragEvent(t,uu(n)))&&(v(n),c&&(oo=+new Date),i=vr(t,n,!0),r=n.dataTransfer.files,i&&!ar(t)))if(r&&r.length&&window.FileReader&&window.File){var o=r.length,f=Array(o),a=0,y=function(n,r){var e=new FileReader;e.onload=function(){f[r]=e.result;++a==o&&(i=u(t.doc,i),wi(t.doc,{from:i,to:i,text:dt(f.join("\n")),origin:"paste"},"around"))};e.readAsText(n)};for(e=0;e<o;++e)y(r[e],e)}else{if(t.state.draggingText&&!(h(i,t.doc.sel.from)||h(t.doc.sel.to,i))){t.state.draggingText(n);setTimeout(ut(g,t),20);return}try{f=n.dataTransfer.getData("Text");f&&(s=t.doc.sel.from,l=t.doc.sel.to,pt(t.doc,i,i),t.state.draggingText&&yt(t.doc,"",s,l,"paste"),t.replaceSelection(f,null,"paste"),g(t),ti(t))}catch(n){}}}function iv(n,t){var u,r;if(c&&(!n.state.draggingText||+new Date-oo<100)){fu(t);return}lt(n,t)||ni(n.display,t)||(u=n.getSelection(),t.dataTransfer.setData("Text",u),t.dataTransfer.setDragImage&&!oe&&(r=i("img",null,null,"position: fixed; left: 0; top: 0;"),ft&&(r.width=r.height=1,n.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),ft&&r.parentNode.removeChild(r)))}function yr(n,t){Math.abs(n.doc.scrollTop-t)<2||(n.doc.scrollTop=t,si||au(n,[],t),n.display.scroller.scrollTop!=t&&(n.display.scroller.scrollTop=t),n.display.scrollbarV.scrollTop!=t&&(n.display.scrollbarV.scrollTop=t),si&&au(n,[]),sr(n,100))}function pi(n,t,i){(i?t==n.doc.scrollLeft:Math.abs(n.doc.scrollLeft-t)<2)||(t=Math.min(t,n.display.scroller.scrollWidth-n.display.scroller.clientWidth),n.doc.scrollLeft=t,pe(n),n.display.scroller.scrollLeft!=t&&(n.display.scroller.scrollLeft=t),n.display.scrollbarH.scrollLeft!=t&&(n.display.scrollbarH.scrollLeft=t))}function ch(n,t){var f=t.wheelDeltaX,u=t.wheelDeltaY,i,r,e;if(f==null&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(f=t.detail),u==null&&t.detail&&t.axis==t.VERTICAL_AXIS?u=t.detail:u==null&&(u=t.wheelDelta),i=n.display,r=i.scroller,f&&r.scrollWidth>r.clientWidth||u&&r.scrollHeight>r.clientHeight){if(u&&ci&&it)for(e=t.target;e!=r;e=e.parentNode)if(e.lineObj){n.display.currentWheelTarget=e;break}if(f&&!si&&!ft&&nt!=null){u&&yr(n,Math.max(0,Math.min(r.scrollTop+u*nt,r.scrollHeight-r.clientHeight)));pi(n,Math.max(0,Math.min(r.scrollLeft+f*nt,r.scrollWidth-r.clientWidth)));v(t);i.wheelStartX=null;return}if(u&&nt!=null){var s=u*nt,o=n.doc.scrollTop,h=o+i.wrapper.clientHeight;s<0?o=Math.max(0,o+s-50):h=Math.min(n.doc.height,h+s+50);au(n,[],{top:o,bottom:h})}pr<20&&(i.wheelStartX==null?(i.wheelStartX=r.scrollLeft,i.wheelStartY=r.scrollTop,i.wheelDX=f,i.wheelDY=u,setTimeout(function(){if(i.wheelStartX!=null){var n=r.scrollLeft-i.wheelStartX,t=r.scrollTop-i.wheelStartY,u=t&&i.wheelDY&&t/i.wheelDY||n&&i.wheelDX&&n/i.wheelDX;(i.wheelStartX=i.wheelStartY=null,u)&&(nt=(nt*pr+u)/(pr+1),++pr)}},200)):(i.wheelDX+=f,i.wheelDY+=u))}}function ku(n,t,i){if(typeof t=="string"&&(t=hf[t],!t))return!1;n.display.pollingFast&&eo(n)&&(n.display.pollingFast=!1);var r=n.doc,f=r.sel.shift,u=!1;try{ar(n)&&(n.state.suppressEdits=!0);i&&(r.sel.shift=!1);u=t(n)!=os}finally{r.sel.shift=f;n.state.suppressEdits=!1}return u}function lh(n){var t=n.state.keyMaps.slice(0);return n.options.extraKeys&&t.push(n.options.extraKeys),t.push(n.options.keyMap),t}function vh(n,t){var e=wo(n.options.keyMap),r=e.auto,i,u,f;return(clearTimeout(ah),r&&!fc(t)&&(ah=setTimeout(function(){wo(n.options.keyMap)==e&&(n.options.keyMap=r.call?r.call(null,n):r,ds(n))},50)),i=ec(t,!0),u=!1,!i)?!1:(f=lh(n),u=t.shiftKey?br("Shift-"+i,f,function(t){return ku(n,t,!0)})||br(i,f,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return ku(n,t)}):br(i,f,function(t){return ku(n,t)}),u&&(v(t),vu(n),d&&(t.oldKeyCode=t.keyCode,t.keyCode=0),k(n,"keyHandled",n,i,t)),u)}function rv(n,t,i){var r=br("'"+i+"'",lh(n),function(t){return ku(n,t,!0)});return r&&(v(t),vu(n),k(n,"keyHandled",n,"'"+i+"'",t)),r}function yh(n){var t=this,i,r;(t.state.focused||ti(t),c&&n.keyCode==27&&(n.returnValue=!1),lt(t,n)||t.options.onKeyEvent&&t.options.onKeyEvent(t,uu(n)))||(i=n.keyCode,t.doc.sel.shift=i==16||n.shiftKey,r=vh(t,n),ft&&(du=r?i:null,r||i!=88||yl||!(ci?n.metaKey:n.ctrlKey)||t.replaceSelection("")))}function uv(n){var t=this,i,r,u;if(!lt(t,n)&&(!t.options.onKeyEvent||!t.options.onKeyEvent(t,uu(n)))){if(i=n.keyCode,r=n.charCode,ft&&i==du){du=null;v(n);return}(ft&&(!n.which||n.which<10)||se)&&vh(t,n)||(u=String.fromCharCode(r==null?i:r),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ar(this)&&this.doc.mode.electricChars.indexOf(u)>-1&&setTimeout(f(t,function(){ff(t,t.doc.sel.to.line,"smart")}),75),rv(t,n,u))||(c&&!d&&(t.display.inputHasSelection=null),lr(t))}}function ti(n){n.options.readOnly!="nocursor"&&(n.state.focused||(p(n,"focus",n),n.state.focused=!0,n.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1&&(n.display.wrapper.className+=" CodeMirror-focused"),vt(n,!0)),pu(n),vu(n))}function so(n){n.state.focused&&(p(n,"blur",n),n.state.focused=!1,n.display.wrapper.className=n.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(n.display.blinker);setTimeout(function(){n.state.focused||(n.doc.sel.shift=!1)},150)}function ph(n,t){function v(){if(i.input.selectionStart!=null){var n=i.input.value=" "+(s(r.from,r.to)?"":i.input.value);i.prevInput=" ";i.input.selectionStart=1;i.input.selectionEnd=n.length}}function y(){if(i.inputDiv.style.position="relative",i.input.style.cssText=a,d&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=l),pu(n),i.input.selectionStart!=null){(!c||d)&&v();clearTimeout(ho);var r=0,t=function(){i.prevInput==" "&&i.input.selectionStart==0?f(n,hf.selectAll)(n):r++<10?ho=setTimeout(t,500):vt(n)};ho=setTimeout(t,200)}}var i=n.display,r=n.doc.sel,u,l,a,o;ni(i,t)||(u=vr(n,t),l=i.scroller.scrollTop,u&&!ft)&&((s(r.from,r.to)||h(u,r.from)||!h(u,r.to))&&f(n,pt)(n.doc,u,u),a=i.input.style.cssText,i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",g(n),vt(n,!0),s(r.from,r.to)&&(i.input.value=i.prevInput=" "),c&&!d&&v(),ce?(fu(t),o=function(){ct(window,"mouseup",o);setTimeout(y,20)},e(window,"mouseup",o)):setTimeout(y,50))}function wh(n,i,f){var e,s,o,c;return h(i.from,f)?(e=i.text.length-1-(i.to.line-i.from.line),f.line>i.to.line+e)?(s=f.line-e,o=n.first+n.size-1,s>o)?t(o,r(n,o).text.length):nf(f,r(n,s).text.length):f.line==i.to.line+e?nf(f,b(i.text).length+(i.text.length==1?i.from.ch:0)+r(n,i.to.line).text.length-i.to.ch):(c=f.line-i.from.line,nf(f,i.text[c].length+(c?0:i.from.ch))):u(n,f)}function co(n,i,r){var u,f;return r&&typeof r=="object"?{anchor:wh(n,i,r.anchor),head:wh(n,i,r.head)}:r=="start"?{anchor:i.from,head:i.from}:(u=gu(i),r=="around")?{anchor:i.from,head:u}:r=="end"?{anchor:u,head:u}:(f=function(n){if(h(n,i.from))return n;if(!h(i.to,n))return u;var f=n.line+i.text.length-(i.to.line-i.from.line)-1,r=n.ch;return n.line==i.to.line&&(r+=u.ch-i.to.ch),t(f,r)},{anchor:f(n.sel.anchor),head:f(n.sel.head)})}function bh(n,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return(i&&(r.update=function(t,i,r,f){t&&(this.from=u(n,t));i&&(this.to=u(n,i));r&&(this.text=r);f!==undefined&&(this.origin=f)}),p(n,"beforeChange",n,r),n.cm&&p(n.cm,"beforeChange",n.cm,r),r.canceled)?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function wi(n,t,i,r){var u,e;if(n.cm){if(!n.cm.curOp)return f(n.cm,wi)(n,t,i,r);if(n.cm.state.suppressEdits)return}if(!kt(n,"beforeChange")&&(!n.cm||!kt(n.cm,"beforeChange"))||(t=bh(n,t,!0),t))if(u=ws&&!r&&pv(n,t.from,t.to),u){for(e=u.length-1;e>=1;--e)lo(n,{from:u[e].from,to:u[e].to,text:[""]});u.length&&lo(n,{from:u[0].from,to:u[0].to,text:t.text},i)}else lo(n,t,i)}function lo(n,t,i){var u=co(n,t,i),r;tl(n,t,u,n.cm?n.cm.curOp.id:NaN);wr(n,t,u,bo(n,t));r=[];nr(n,function(n,i){i||at(r,n.history)!=-1||(rl(n.history,t),r.push(n.history));wr(n,t,null,bo(n,t))})}function kh(n,t){var r,i,e,s,f,u,h,o;if((!n.cm||!n.cm.state.suppressEdits)&&(r=n.history,i=(t=="undo"?r.done:r.undone).pop(),i))for(e={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:r.generation},(t=="undo"?r.undone:r.done).push(e),r.generation=i.generation||++r.maxGeneration,s=kt(n,"beforeChange")||n.cm&&kt(n.cm,"beforeChange"),f=i.changes.length-1;f>=0;--f){if(u=i.changes[f],u.origin=t,s&&!bh(n,u,!1)){(t=="undo"?r.done:r.undone).length=0;return}e.changes.push(fs(n,u));h=f?co(n,u,null):{anchor:i.anchorBefore,head:i.headBefore};wr(n,u,h,oc(n,u));o=[];nr(n,function(n,t){t||at(o,n.history)!=-1||(rl(n.history,u),o.push(n.history));wr(n,u,null,oc(n,u))})}}function dh(n,i){function r(n){return t(n.line+i,n.ch)}n.first+=i;n.cm&&a(n.cm,n.first,n.first,i);n.sel.head=r(n.sel.head);n.sel.anchor=r(n.sel.anchor);n.sel.from=r(n.sel.from);n.sel.to=r(n.sel.to)}function wr(n,i,u,e){var s,o;if(n.cm&&!n.cm.curOp)return f(n.cm,wr)(n,i,u,e);if(i.to.line<n.first){dh(n,i.text.length-1-(i.to.line-i.from.line));return}i.from.line>n.lastLine()||(i.from.line<n.first&&(s=i.text.length-1-(n.first-i.from.line),dh(n,s),i={from:t(n.first,0),to:t(i.to.line+s,i.to.ch),text:[b(i.text)],origin:i.origin}),o=n.lastLine(),i.to.line>o&&(i={from:i.from,to:t(o,r(n,o).text.length),text:[i.text[0]],origin:i.origin}),i.removed=rs(n,i.from,i.to),u||(u=co(n,i,null)),n.cm?fv(n.cm,i,e,u):is(n,i,e,u))}function fv(n,t,i,u){var f=n.doc,o=n.display,e=t.from,c=t.to,l=!1,v=e.line,p,y,s;if(n.options.lineWrapping||(v=tt(wt(f,r(f,e.line))),f.iter(v,c.line+1,function(n){if(n==o.maxLine)return l=!0,!0})),h(f.sel.head,t.from)||h(t.to,f.sel.head)||(n.curOp.cursorActivity=!0),is(f,t,i,u,bs(n)),n.options.lineWrapping||(f.iter(v,e.line+t.text.length,function(n){var t=lu(f,n);t>o.maxLineLength&&(o.maxLine=n,o.maxLineLength=t,o.maxLineChanged=!0,l=!1)}),l&&(n.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,e.line),sr(n,400),p=t.text.length-(c.line-e.line)-1,a(n,e.line,c.line+1,p),kt(n,"change"))if(y={from:e,to:c,text:t.text,removed:t.removed,origin:t.origin},n.curOp.textChanged){for(s=n.curOp.textChanged;s.next;s=s.next);s.next=y}else n.curOp.textChanged=y}function yt(n,t,i,r,u){if(r||(r=i),h(r,i)){var f=r;r=i;i=f}typeof t=="string"&&(t=dt(t));wi(n,{from:i,to:r,text:t,origin:u},null)}function t(n,i){if(!(this instanceof t))return new t(n,i);this.line=n;this.ch=i}function s(n,t){return n.line==t.line&&n.ch==t.ch}function h(n,t){return n.line<t.line||n.line==t.line&&n.ch<t.ch}function ii(n){return t(n.line,n.ch)}function gh(n,t){return Math.max(n.first,Math.min(t,n.first+n.size-1))}function u(n,i){if(i.line<n.first)return t(n.first,0);var u=n.first+n.size-1;return i.line>u?t(u,r(n,u).text.length):nf(i,r(n,i.line).text.length)}function nf(n,i){var r=n.ch;return r==null||r>i?t(n.line,i):r<0?t(n.line,0):n}function bi(n,t){return t>=n.first&&t<n.first+n.size}function y(n,t,i,r){var u,f;n.sel.shift||n.sel.extend?(u=n.sel.anchor,i&&(f=h(t,u),f!=h(i,u)?(u=t,t=i):f!=h(t,i)&&(t=i)),pt(n,u,t,r)):pt(n,t,i||t,r);n.cm&&(n.cm.curOp.userSelChange=!0)}function ev(n,t,i){var r={anchor:t,head:i};return p(n,"beforeSelectionChange",n,r),n.cm&&p(n.cm,"beforeSelectionChange",n.cm,r),r.anchor=u(n,r.anchor),r.head=u(n,r.head),r}function pt(n,t,i,r,u){var e,f,o;((!u&&kt(n,"beforeSelectionChange")||n.cm&&kt(n.cm,"beforeSelectionChange"))&&(e=ev(n,t,i),i=e.head,t=e.anchor),f=n.sel,f.goalColumn=null,(u||!s(t,f.anchor))&&(t=tf(n,t,r,u!="push")),(u||!s(i,f.head))&&(i=tf(n,i,r,u!="push")),s(f.anchor,t)&&s(f.head,i))||(f.anchor=t,f.head=i,o=h(i,t),f.from=o?i:t,f.to=o?t:i,n.cm&&(n.cm.curOp.updateInput=n.cm.curOp.selectionChanged=n.cm.curOp.cursorActivity=!0),k(n,"cursorActivity",n))}function nc(n){pt(n.doc,n.doc.sel.from,n.doc.sel.to,null,"push")}function tf(n,i,f,e){var w=!1,h=i,y=f||1,a,v,c,l,o;n.cantEdit=!1;n:for(;;){if(a=r(n,h.line),a.markedSpans)for(v=0;v<a.markedSpans.length;++v)if(c=a.markedSpans[v],l=c.marker,(c.from==null||(l.inclusiveLeft?c.from<=h.ch:c.from<h.ch))&&(c.to==null||(l.inclusiveRight?c.to>=h.ch:c.to>h.ch))){if(e&&(p(l,"beforeCursorEnter"),l.explicitlyCleared))if(a.markedSpans){--v;continue}else break;if(!l.atomic)continue;if(o=l.find()[y<0?"from":"to"],s(o,h)&&(o.ch+=y,o.ch<0?o=o.line>n.first?u(n,t(o.line-1)):null:o.ch>a.text.length&&(o=o.line<n.first+n.size-1?t(o.line+1,0):null),!o)){if(w)return e?(n.cantEdit=!0,t(n.first,0)):tf(n,i,f,!0);w=!0;o=i;y=-y}h=o;continue n}return h}}function ov(n){var i=tc(n,n.doc.sel.head,n.options.cursorScrollMargin),u;if(n.state.focused){var t=n.display,f=l(t.sizer),r=null;i.top+f.top<0?r=!0:i.bottom+f.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1);r==null||ta||(u=t.cursor.style.display=="none",u&&(t.cursor.style.display="",t.cursor.style.left=i.left+"px",t.cursor.style.top=i.top-t.viewOffset+"px"),t.cursor.scrollIntoView(r),u&&(t.cursor.style.display="none"))}}function tc(n,t,i){for(i==null&&(i=0);;){var f=!1,r=et(n,t),u=rf(n,r.left,r.top-i,r.left,r.bottom+i),e=n.doc.scrollTop,o=n.doc.scrollLeft;if(u.scrollTop!=null&&(yr(n,u.scrollTop),Math.abs(n.doc.scrollTop-e)>1&&(f=!0)),u.scrollLeft!=null&&(pi(n,u.scrollLeft),Math.abs(n.doc.scrollLeft-o)>1&&(f=!0)),!f)return r}}function sv(n,t,i,r,u){var f=rf(n,t,i,r,u);f.scrollTop!=null&&yr(n,f.scrollTop);f.scrollLeft!=null&&pi(n,f.scrollLeft)}function rf(n,t,i,r,u){var f=n.display,v=ai(n.display),h,c,l,o,a;i<0&&(i=0);var y=f.scroller.clientHeight-ei,s=f.scroller.scrollTop,e={},p=n.doc.height+rh(f),w=i<v,b=u>p-v;return i<s?e.scrollTop=w?0:i:u>s+y&&(h=Math.min(i,(b?p:u)-y),h!=s&&(e.scrollTop=h)),c=f.scroller.clientWidth-ei,l=f.scroller.scrollLeft,t+=f.gutters.offsetWidth,r+=f.gutters.offsetWidth,o=f.gutters.offsetWidth,a=t<o+10,t<l+o||a?(a&&(t=0),e.scrollLeft=Math.max(0,t-10-o)):r>c+l-3&&(e.scrollLeft=r+10-c),e}function uf(n,t,i){n.curOp.updateScrollPos={scrollLeft:t==null?n.doc.scrollLeft:t,scrollTop:i==null?n.doc.scrollTop:i}}function ic(n,t,i){var r=n.curOp.updateScrollPos||(n.curOp.updateScrollPos={scrollLeft:n.doc.scrollLeft,scrollTop:n.doc.scrollTop}),u=n.display.scroller;r.scrollTop=Math.max(0,Math.min(u.scrollHeight-u.clientHeight,r.scrollTop+i));r.scrollLeft=Math.max(0,Math.min(u.scrollWidth-u.clientWidth,r.scrollLeft+t))}function ff(n,i,u,f){var l=n.doc,p,s,c,y;u==null&&(u="add");u=="smart"&&(n.doc.mode.indent?p=hr(n,i):u="prev");var h=n.options.tabSize,o=r(l,i),a=tr(o.text,null,h),v=o.text.match(/^\s*/)[0],e;if(u=="smart"&&(e=n.doc.mode.indent(p,o.text.slice(v.length),o.text),e==os)){if(!f)return;u="prev"}if(u=="prev"?e=i>l.first?tr(r(l,i-1).text,null,h):0:u=="add"?e=a+n.options.indentUnit:u=="subtract"?e=a-n.options.indentUnit:typeof u=="number"&&(e=a+u),e=Math.max(0,e),s="",c=0,n.options.indentWithTabs)for(y=Math.floor(e/h);y;--y)c+=h,s+="\t";c<e&&(s+=el(e-c));s!=v&&yt(n.doc,s,t(i,0),t(i,v.length),"+input");o.stateAfter=null}function ef(n,t,i){var u=t,f=t,e=n.doc;if(typeof t=="number"?f=r(e,gh(e,t)):u=tt(t),u==null)return null;if(i(f,u))a(n,u,u+1);else return null;return f}function ao(n,i,u,f,e){function d(){var t=c+u;return t<n.first||t>=n.first+n.size?y=!1:(c=t,s=r(n,t))}function h(n){var t=(e?ys:wl)(s,o,u,!0);if(t==null)if(!n&&d())o=e?(u<0?ee:fe)(s):u<0?s.text.length:0;else return y=!1;else o=t;return!0}var c=i.line,o=i.ch,k=u,s=r(n,c),y=!0,l,b,a,p,v,w;if(f=="char")h();else if(f=="column")h(!0);else if(f=="word"||f=="group")for(l=null,b=f=="group",a=!0;;a=!1){if(u<0&&!h(!a))break;if(p=s.text.charAt(o)||"\n",v=te(p)?"w":b?/\s/.test(p)?null:"p":null,l&&l!=v){u<0&&(u=1,h());break}if(v&&(l=v),u>0&&!h(!a))break}return w=tf(n,t(c,o),k,!0),y||(w.hitSide=!0),w}function rc(n,t,i,r){var o=n.doc,s=t.left,u,e,f;for(r=="page"?(e=Math.min(n.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=t.top+i*(e-(i<0?1.5:.5)*ai(n.display))):r=="line"&&(u=i>0?t.bottom+3:t.top-3);;){if(f=uo(n,s,u),!f.outside)break;if(i<0?u<=0:u>=o.height){f.hitSide=!0;break}u+=i*5}return f}function vo(n,i){var r=i.ch,u=i.ch,f,e;if(n){for(i.xRel<0||u==n.length?--r:++u,f=n.charAt(r),e=te(f)?te:/\s/.test(f)?function(n){return/\s/.test(n)}:function(n){return!/\s/.test(n)&&!te(n)};r>0&&e(n.charAt(r-1));)--r;while(u<n.length&&e(n.charAt(u)))++u}return{from:t(i.line,r),to:t(i.line,u)}}function hv(n,i){y(n.doc,t(i,0),u(n.doc,t(i+1,0)))}function o(t,i,r,u){n.defaults[t]=i;r&&(ri[t]=u?function(n,t,i){i!=yo&&r(n,t,i)}:r)}function gi(n,t){var r,u,i;if(t===!0)return t;if(n.copyState)return n.copyState(t);r={};for(u in t)i=t[u],i instanceof Array&&(i=i.concat([])),r[u]=i;return r}function uc(n,t,i){return n.startState?n.startState(t,i):!0}function wo(n){return typeof n=="string"?ot[n]:n}function br(n,t,i){function u(t){var f,r,e,s,o;if(t=wo(t),f=t[n],f===!1)return"stop";if(f!=null&&i(f))return!0;if(t.nofallthrough)return"stop";if(r=t.fallthrough,r==null)return!1;if(Object.prototype.toString.call(r)!="[object Array]")return u(r);for(e=0,s=r.length;e<s;++e)if(o=u(r[e]),o)return o;return!1}for(var f,r=0;r<t.length;++r)if(f=u(t[r]),f)return f!="stop"}function fc(n){var t=oi[n.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function ec(n,t){if(ft&&n.keyCode==34&&n.char)return!1;var i=oi[n.keyCode];return i==null||n.altGraphKey?!1:(n.altKey&&(i="Alt-"+i),(ps?n.metaKey:n.ctrlKey)&&(i="Ctrl-"+i),(ps?n.ctrlKey:n.metaKey)&&(i="Cmd-"+i),!t&&n.shiftKey&&(i="Shift-"+i),i)}function kr(n,t){this.pos=this.start=0;this.string=n;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0}function ui(n,t){this.lines=[];this.type=t;this.doc=n}function dr(n,t,r,u,o){var s;if(u&&u.shared)return cv(n,t,r,u,o);if(n.cm&&!n.cm.curOp)return f(n.cm,dr)(n,t,r,u,o);if(s=new ui(n,o),o=="range"&&!h(t,r))return s;u&&ne(u,s);s.replacedWith&&(s.collapsed=!0,s.replacedWith=i("span",[s.replacedWith],"CodeMirror-widget"),u.handleMouseEvents||(s.replacedWith.ignoreEvents=!0));s.collapsed&&(fr=!0);s.addToHistory&&tl(n,{from:t,to:r,origin:"markText"},{head:n.sel.head,anchor:n.sel.anchor},NaN);var l=t.line,v=0,y,p,c=n.cm,w;if(n.iter(l,r.line+1,function(i){c&&s.collapsed&&!c.options.lineWrapping&&wt(n,i)==c.display.maxLine&&(w=!0);var u={from:null,to:null,marker:s};v+=i.text.length;l==t.line&&(u.from=t.ch,v-=t.ch);l==r.line&&(u.to=r.ch,v-=i.text.length-r.ch);s.collapsed&&(l==r.line&&(p=lf(i,r.ch)),l==t.line?y=lf(i,t.ch):rt(i,0));av(i,u);++l}),s.collapsed&&n.iter(t.line,r.line+1,function(t){fi(n,t)&&rt(t,0)}),s.clearOnEnter&&e(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(ws=!0,(n.history.done.length||n.history.undone.length)&&n.clearHistory()),s.collapsed){if(y!=p)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=v;s.atomic=!0}return c&&(w&&(c.curOp.updateMaxLine=!0),(s.className||s.startStyle||s.endStyle||s.collapsed)&&a(c,t.line,r.line+1),s.atomic&&nc(c)),s}function cf(n,t){this.markers=n;this.primary=t;for(var i=0,r=this;i<n.length;++i)n[i].parent=this,e(n[i],"clear",function(){r.clear()})}function cv(n,t,i,r,f){r=ne(r);r.shared=!1;var e=[dr(n,t,i,r,f)],o=e[0],s=r.replacedWith;return nr(n,function(n){s&&(r.replacedWith=s.cloneNode(!0));e.push(dr(n,u(n,t),u(n,i),r,f));for(var h=0;h<n.linked.length;++h)if(n.linked[h].isParent)return;o=b(e)}),new cf(e,o)}function gr(n,t){var i,r;if(n)for(i=0;i<n.length;++i)if(r=n[i],r.marker==t)return r}function lv(n,t){for(var r,i=0;i<n.length;++i)n[i]!=t&&(r||(r=[])).push(n[i]);return r}function av(n,t){n.markedSpans=n.markedSpans?n.markedSpans.concat([t]):[t];t.marker.attachLine(n)}function vv(n,t,i){var u,e,o;if(n)for(u=0;u<n.length;++u){var r=n[u],f=r.marker,s=r.from==null||(f.inclusiveLeft?r.from<=t:r.from<t);!s&&(f.type!="bookmark"||r.from!=t||i&&r.marker.insertLeft)||(o=r.to==null||(f.inclusiveRight?r.to>=t:r.to>t),(e||(e=[])).push({from:r.from,to:o?null:r.to,marker:f}))}return e}function yv(n,t,i){var u,e,o;if(n)for(u=0;u<n.length;++u){var r=n[u],f=r.marker,s=r.to==null||(f.inclusiveRight?r.to>=t:r.to>t);(s||f.type=="bookmark"&&r.from==t&&(!i||r.marker.insertLeft))&&(o=r.from==null||(f.inclusiveLeft?r.from<=t:r.from<t),(e||(e=[])).push({from:o?null:r.from-t,to:r.to==null?null:r.to-t,marker:f}))}return e}function bo(n,t){var p=bi(n,t.from.line)&&r(n,t.from.line).markedSpans,w=bi(n,t.to.line)&&r(n,t.to.line).markedSpans,f,o,l,v,y,i;if(!p&&!w)return null;var a=t.from.ch,d=t.to.ch,k=s(t.from,t.to),u=vv(p,a,k),h=yv(w,d,k),e=t.text.length==1,c=b(t.text).length+(e?a:0);if(u)for(i=0;i<u.length;++i)f=u[i],f.to==null&&(o=gr(h,f.marker),o?e&&(f.to=o.to==null?null:o.to+c):f.to=a);if(h)for(i=0;i<h.length;++i)f=h[i],f.to!=null&&(f.to+=c),f.from==null?(o=gr(u,f.marker),o||(f.from=c,e&&(u||(u=[])).push(f))):(f.from+=c,e&&(u||(u=[])).push(f));if(e&&u){for(i=0;i<u.length;++i)u[i].from!=null&&u[i].from==u[i].to&&u[i].marker.type!="bookmark"&&u.splice(i--,1);u.length||(u=null)}if(l=[u],!e){if(v=t.text.length-2,v>0&&u)for(i=0;i<u.length;++i)u[i].to==null&&(y||(y=[])).push({from:null,to:null,marker:u[i].marker});for(i=0;i<v;++i)l.push(y);l.push(h)}return l}function oc(n,t){var i=iy(n,t),s=bo(n,t),r,f,u,e,h,o;if(!i)return s;if(!s)return i;for(r=0;r<i.length;++r)if(f=i[r],u=s[r],f&&u)n:for(e=0;e<u.length;++e){for(h=u[e],o=0;o<f.length;++o)if(f[o].marker==h.marker)continue n;f.push(h)}else u&&(i[r]=u);return i}function pv(n,t,i){var f=null,e,l,a,r,o,u,c;if(n.iter(t.line,i.line+1,function(n){var t,i;if(n.markedSpans)for(t=0;t<n.markedSpans.length;++t)i=n.markedSpans[t].marker,i.readOnly&&(!f||at(f,i)==-1)&&(f||(f=[])).push(i)}),!f)return null;for(e=[{from:t,to:i}],l=0;l<f.length;++l)for(a=f[l],r=a.find(),o=0;o<e.length;++o)(u=e[o],h(u.to,r.from)||h(r.to,u.from))||(c=[o,1],(h(u.from,r.from)||!a.inclusiveLeft&&s(u.from,r.from))&&c.push({from:u.from,to:r.from}),(h(r.to,u.to)||!a.inclusiveRight&&s(u.to,r.to))&&c.push({from:r.to,to:u.to}),e.splice.apply(e,c),o+=c.length-1);return e}function lf(n,t){var f=fr&&n.markedSpans,r,i,u;if(f)for(u=0;u<f.length;++u)(i=f[u],i.marker.collapsed)&&(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function ko(n){return lf(n,-1)}function af(n){return lf(n,n.text.length+1)}function wt(n,t){for(var i;i=ko(t);)t=r(n,i.find().from.line);return t}function fi(n,t){var u=fr&&t.markedSpans,i,r;if(u)for(r=0;r<u.length;++r)if(i=u[r],i.marker.collapsed){if(i.from==null)return!0;if(!i.marker.replacedWith&&i.from==0&&i.marker.inclusiveLeft&&go(n,t,i))return!0}}function go(n,t,i){var o,e,u,f;if(i.to==null)return o=i.marker.find().to,e=r(n,o.line),go(n,e,gr(e.markedSpans,i.marker));if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(f=0;f<t.markedSpans.length;++f)if(u=t.markedSpans[f],u.marker.collapsed&&!u.marker.replacedWith&&u.from==i.to&&(u.marker.inclusiveLeft||i.marker.inclusiveRight)&&go(n,t,u))return!0}function sc(n){var i=n.markedSpans,t;if(i){for(t=0;t<i.length;++t)i[t].marker.detachLine(n);n.markedSpans=null}}function hc(n,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(n);n.markedSpans=t}}function cc(n){return function(){var t=!this.cm.curOp,i;t&&vi(this.cm);try{i=n.apply(this,arguments)}finally{t&&yi(this.cm)}return i}}function yf(n){return n.height!=null?n.height:(n.node.parentNode&&n.node.parentNode.nodeType==1||ht(n.cm.display.measure,i("div",[n.node],null,"position: relative")),n.height=n.node.offsetHeight)}function wv(n,t,i,r){var u=new vf(n,i,r);return u.noHScroll&&(n.display.alignWidgets=!0),ef(n,t,function(t){if((t.widgets||(t.widgets=[])).push(u),u.line=t,!fi(n.doc,t)||u.showIfHidden){var i=bf(n,t)<n.display.scroller.scrollTop;rt(t,t.height+yf(u));i&&ic(n,0,u.height)}return!0}),u}function nu(n,t,i){var r={text:n};return hc(r,t),r.height=i?i(r):1,r}function bv(n,t,i,r){n.text=t;n.stateAfter&&(n.stateAfter=null);n.styles&&(n.styles=null);n.order!=null&&(n.order=null);sc(n);hc(n,i);var u=r?r(n):1;u!=n.height&&rt(n,u)}function kv(n){n.parent=null;sc(n)}function lc(n,t,i,r,u){var e=i.flattenSpans;e==null&&(e=n.options.flattenSpans);var h=0,o=null,f=new kr(t,n.options.tabSize),s;for(t==""&&i.blankLine&&i.blankLine(r);!f.eol();)f.pos>n.options.maxHighlightLength?(e=!1,f.pos=Math.min(t.length,f.start+5e4),s=null):s=i.token(f,r),e&&o==s||(h<f.start&&u(f.start,o),h=f.start,o=s),f.start=f.pos;h<f.pos&&u(f.pos,o)}function ac(n,t,i){var r=[n.state.modeGen],f;for(lc(n,t.text,n.doc.mode,i,function(n,t){r.push(n,t)}),f=0;f<n.state.overlays.length;++f){var e=n.state.overlays[f],u=1,o=0;lc(n,t.text,e.mode,!0,function(n,t){for(var i=u,f,s;o<n;)f=r[u],f>n&&r.splice(u,1,n,r[u+1],f),u+=2,o=Math.min(n,f);if(t)if(e.opaque)r.splice(i,u-i,n,t),u=i+2;else for(;i<u;i+=2)s=r[i+1],r[i+1]=s?s+" "+t:t})}return r}function vc(n,t){return t.styles&&t.styles[0]==n.state.modeGen||(t.styles=ac(n,t,t.stateAfter=hr(n,tt(t)))),t.styles}function yc(n,t,i){var u=n.doc.mode,r=new kr(t.text,n.options.tabSize);for(t.text==""&&u.blankLine&&u.blankLine(i);!r.eol()&&r.pos<=n.options.maxHighlightLength;)u.token(r,i),r.start=r.pos}function pc(n){return n?ns[n]||(ns[n]="cm-"+n.replace(/ +/g," cm-")):null}function ts(n,t,u){for(var y,e=t,w=!0,f,l,o,s,a,v,h;y=ko(e);)e=r(n.doc,y.find().from.line);f={pre:i("pre"),col:0,pos:0,display:!u,measure:null,measuredSomething:!1,cm:n};e.textClass&&(f.pre.className=e.textClass);do e.text&&(w=!1),f.measure=e==t&&u,f.pos=0,f.addToken=f.measure?dv:wc,(c||it)&&n.getOption("lineWrapping")&&(f.addToken=gv(f.addToken)),l=ny(e,f,vc(n,e)),u&&e==t&&!f.measuredSomething&&(u[0]=f.pre.appendChild(cu(n.display.measure)),f.measuredSomething=!0),l&&(e=r(n.doc,l.to.line));while(l);return!u||f.measuredSomething||u[0]||(u[0]=f.pre.appendChild(w?i("span"," "):cu(n.display.measure))),f.pre.firstChild||fi(n.doc,t)||f.pre.appendChild(document.createTextNode(" ")),u&&c&&(o=st(e))&&(s=o.length-1,o[s].from==o[s].to&&--s,a=o[s],v=o[s-1],a.from+1==a.to&&v&&a.level<v.level&&(h=u[f.pos-1],h&&h.parentNode.insertBefore(h.measureRight=cu(n.display.measure),h.nextSibling))),p(n,"renderLine",n,t,f.pre),f.pre}function wc(n,t,r,u,f){var e,o,s,h,l,a,v,c;if(t){if(pf.test(t))for(e=document.createDocumentFragment(),o=0;;){if(pf.lastIndex=o,s=pf.exec(t),h=s?s.index-o:t.length-o,h&&(e.appendChild(document.createTextNode(t.slice(o,o+h))),n.col+=h),!s)break;o+=h+1;s[0]=="\t"?(l=n.cm.options.tabSize,a=l-n.col%l,e.appendChild(i("span",el(a),"cm-tab")),n.col+=a):(v=i("span","•","cm-invalidchar"),v.title="\\u"+s[0].charCodeAt(0).toString(16),e.appendChild(v),n.col+=1)}else n.col+=t.length,e=document.createTextNode(t);if(r||u||f||n.measure)return c=r||"",u&&(c+=u),f&&(c+=f),n.pre.appendChild(i("span",[e],c));n.pre.appendChild(e)}}function dv(n,t,r,u,f){for(var o,h,l,s=n.cm.options.lineWrapping,e=0;e<t.length;++e)o=t.charAt(e),h=e==0,o>="\ud800"&&o<"\udbff"&&e<t.length-1?(o=t.slice(e,e+2),++e):e&&s&&ue(t,e)&&n.pre.appendChild(i("wbr")),l=n.measure[n.pos]=wc(n,o,r,h&&u,e==t.length-1&&f),c&&s&&o==" "&&e&&!/\s/.test(t.charAt(e-1))&&e<t.length-1&&!/\s/.test(t.charAt(e+1))&&(l.style.whiteSpace="normal"),n.pos+=o.length;t.length&&(n.measuredSomething=!0)}function gv(n){function t(n){for(var i=" ",t=0;t<n.length-2;++t)i+=t%2?" ":" ";return i+" "}return function(i,r,u,f,e){return n(i,r.replace(/ {3,}/,t),u,f,e)}}function bc(n,t,i){i&&(n.display||(i=i.cloneNode(!0)),n.measure&&(n.measure[n.pos]=t?i:n.pre.appendChild(cu(n.cm.display.measure)),n.measuredSomething=!0),n.pre.appendChild(i));n.pos+=t}function ny(n,t,i){var k=n.markedSpans,d=n.text,l=0,s,p,w,u,e,c,b,tt;if(!k){for(s=1;s<i.length;s+=2)t.addToken(t,d.slice(l,l=i[s]),pc(i[s+1]));return}for(var g=d.length,r=0,s=1,h="",nt,o=0,a,v,y,f;;){if(o==r){for(a=v=y="",f=null,o=Infinity,p=null,w=0;w<k.length;++w)u=k[w],e=u.marker,u.from<=r&&(u.to==null||u.to>r)?(u.to!=null&&o>u.to&&(o=u.to,v=""),e.className&&(a+=" "+e.className),e.startStyle&&u.from==r&&(y+=" "+e.startStyle),e.endStyle&&u.to==o&&(v+=" "+e.endStyle),e.collapsed&&(!f||f.marker.size<e.size)&&(f=u)):u.from>r&&o>u.from&&(o=u.from),e.type=="bookmark"&&u.from==r&&e.replacedWith&&(p=e.replacedWith);if(f&&(f.from||0)==r&&(bc(t,(f.to==null?g:f.to)-r,f.from!=null&&f.marker.replacedWith),f.to==null))return f.marker.find();p&&!f&&bc(t,0,p)}if(r>=g)break;for(c=Math.min(g,o);;){if(h){if(b=r+h.length,f||(tt=b>c?h.slice(0,c-r):h,t.addToken(t,tt,nt?nt+a:a,y,r+tt.length==o?v:"")),b>=c){h=h.slice(c-r);r=c;break}r=b;y=""}h=d.slice(l,l=i[s++]);nt=pc(i[s++])}}}function is(n,t,i,u,f){function l(n){return i?i[n]:null}function v(n,i,r){bv(n,i,r,f);k(n,"change",n,t)}var e=t.from,a=t.to,o=t.text,h=r(n,e.line),y=r(n,a.line),w=b(o),d=l(o.length-1),p=a.line-e.line;if(e.ch==0&&a.ch==0&&w==""){for(var s=0,g=o.length-1,c=[];s<g;++s)c.push(nu(o[s],l(s),f));v(y,y.text,d);p&&n.remove(e.line,p);c.length&&n.insert(e.line,c)}else if(h==y)if(o.length==1)v(h,h.text.slice(0,e.ch)+w+h.text.slice(a.ch),d);else{for(var c=[],s=1,g=o.length-1;s<g;++s)c.push(nu(o[s],l(s),f));c.push(nu(w+h.text.slice(a.ch),d,f));v(h,h.text.slice(0,e.ch)+o[0],l(0));n.insert(e.line+1,c)}else if(o.length==1)v(h,h.text.slice(0,e.ch)+o[0]+y.text.slice(a.ch),l(0)),n.remove(e.line+1,p);else{v(h,h.text.slice(0,e.ch)+o[0],l(0));v(y,w+y.text.slice(a.ch),d);for(var s=1,g=o.length-1,c=[];s<g;++s)c.push(nu(o[s],l(s),f));p>1&&n.remove(e.line+1,p-1);n.insert(e.line+1,c)}k(n,"change",n,t);pt(n,u.anchor,u.head,null,!0)}function wf(n){this.lines=n;this.parent=null;for(var t=0,r=n.length,i=0;t<r;++t)n[t].parent=this,i+=n[t].height;this.height=i}function tu(n){var r,u,t,f,i;for(this.children=n,r=0,u=0,t=0,f=n.length;t<f;++t)i=n[t],r+=i.chunkSize(),u+=i.height,i.parent=this;this.size=r;this.height=u;this.parent=null}function nr(n,t,i){function r(n,u,f){var o,e,s;if(n.linked)for(o=0;o<n.linked.length;++o)(e=n.linked[o],e.doc!=u)&&(s=f&&e.sharedHist,!i||s)&&(t(e.doc,s),r(e.doc,n,s))}r(n,null,!0)}function gc(n,t){if(t.cm)throw new Error("This document is already in use.");n.doc=t;t.cm=n;ks(n);er(n);n.options.lineWrapping||le(n);n.options.mode=t.modeOption;a(n)}function r(n,t){var i,r,u;for(t-=n.first;!n.lines;)for(i=0;;++i){if(r=n.children[i],u=r.chunkSize(),t<u){n=r;break}t-=u}return n.lines[t]}function rs(n,t,i){var u=[],r=t.line;return n.iter(t.line,i.line+1,function(n){var f=n.text;r==i.line&&(f=f.slice(0,i.ch));r==t.line&&(f=f.slice(t.ch));u.push(f);++r}),u}function us(n,t,i){var r=[];return n.iter(t,i,function(n){r.push(n.text)}),r}function rt(n,t){for(var r=t-n.height,i=n;i;i=i.parent)i.height+=r}function tt(n){var i,u,t,r;if(n.parent==null)return null;for(i=n.parent,u=at(i.lines,n),t=i.parent;t;i=t,t=t.parent)for(r=0;;++r){if(t.children[r]==i)break;u+=t.children[r].chunkSize()}return u+i.first}function ru(n,t){var f=n.first,u,e,i,r,s,o;n:do{for(i=0,r=n.children.length;i<r;++i){if(u=n.children[i],e=u.height,t<e){n=u;continue n}t-=e;f+=u.chunkSize()}return f}while(!n.lines);for(i=0,r=n.lines.length;i<r;++i){if(s=n.lines[i],o=s.height,t<o)break;t-=o}return f+i}function bf(n,t){var f,r,e,u,i,o;for(t=wt(n.doc,t),f=0,r=t.parent,i=0;i<r.lines.length;++i)if(e=r.lines[i],e==t)break;else f+=e.height;for(u=r.parent;u;r=u,u=r.parent)for(i=0;i<u.children.length;++i)if(o=u.children[i],o==r)break;else f+=o.height;return f}function st(n){var t=n.order;return t==null&&(t=n.order=bl(n.text)),t}function kf(n){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:n||1,maxGeneration:n||1}}function nl(n,t,i,r){var u=t["spans_"+n.id],f=0;n.iter(Math.max(n.first,i),Math.min(n.first+n.size,r),function(i){i.markedSpans&&((u||(u=t["spans_"+n.id]={}))[f]=i.markedSpans);++f})}function fs(n,t){var i={from:t.from,to:gu(t),text:rs(n,t.from,t.to)};return nl(n,i,t.from.line,t.to.line+1),nr(n,function(n){nl(n,i,t.from.line,t.to.line+1)},!0),i}function tl(n,t,i,r){var u=n.history,e,f,o;if(u.undone.length=0,e=+new Date,f=b(u.done),f&&(u.lastOp==r||u.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&n.cm&&u.lastTime>e-n.cm.options.historyEventDelay||t.origin.charAt(0)=="*")))o=b(f.changes),s(t.from,t.to)&&s(t.from,o.to)?o.to=gu(t):f.changes.push(fs(n,t)),f.anchorAfter=i.anchor,f.headAfter=i.head;else for(f={changes:[fs(n,t)],generation:u.generation,anchorBefore:n.sel.anchor,headBefore:n.sel.head,anchorAfter:i.anchor,headAfter:i.head},u.done.push(f),u.generation=++u.maxGeneration;u.done.length>u.undoDepth;)u.done.shift();u.lastTime=e;u.lastOp=r;u.lastOrigin=t.origin}function ty(n){if(!n)return null;for(var i=0,t;i<n.length;++i)n[i].marker.explicitlyCleared?t||(t=n.slice(0,i)):t&&t.push(n[i]);return t?t.length?t:null:n}function iy(n,t){var u=t["spans_"+n.id],i,r;if(!u)return null;for(i=0,r=[];i<t.text.length;++i)r.push(ty(u[i]));return r}function df(n,t){for(var e,i,c,u,f=0,o=[];f<n.length;++f){var r=n[f],h=r.changes,s=[];for(o.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter}),e=0;e<h.length;++e)if(i=h[e],s.push({from:i.from,to:i.to,text:i.text}),t)for(u in i)(c=u.match(/^spans_(\d+)$/))&&at(t,Number(c[1]))>-1&&(b(s)[u]=i[u],delete i[u])}return o}function gf(n,t,i,r){i<n.line?n.line+=r:t<n.line&&(n.line=t,n.ch=0)}function il(n,t,i,r){for(var u,s,o,f,e=0;e<n.length;++e){for(u=n[e],s=!0,o=0;o<u.changes.length;++o)if(f=u.changes[o],u.copied||(f.from=ii(f.from),f.to=ii(f.to)),i<f.from.line)f.from.line+=r,f.to.line+=r;else if(t<=f.to.line){s=!1;break}u.copied||(u.anchorBefore=ii(u.anchorBefore),u.headBefore=ii(u.headBefore),u.anchorAfter=ii(u.anchorAfter),u.readAfter=ii(u.headAfter),u.copied=!0);s?(gf(u.anchorBefore),gf(u.headBefore),gf(u.anchorAfter),gf(u.headAfter)):(n.splice(0,e+1),e=0)}}function rl(n,t){var i=t.from.line,r=t.to.line,u=t.text.length-(r-i)-1;il(n.done,i,r,u);il(n.undone,i,r,u)}function ry(){fu(this)}function uu(n){return n.stop||(n.stop=ry),n}function v(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function ul(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function uy(n){return n.defaultPrevented!=null?n.defaultPrevented:n.returnValue==!1}function fu(n){v(n);ul(n)}function es(n){return n.target||n.srcElement}function fl(n){var t=n.which;return t==null&&(n.button&1?t=1:n.button&2?t=3:n.button&4&&(t=2)),ci&&n.ctrlKey&&t==1&&(t=3),t}function e(n,t,i){if(n.addEventListener)n.addEventListener(t,i,!1);else if(n.attachEvent)n.attachEvent("on"+t,i);else{var r=n._handlers||(n._handlers={}),u=r[t]||(r[t]=[]);u.push(i)}}function ct(n,t,i){var r,u;if(n.removeEventListener)n.removeEventListener(t,i,!1);else if(n.detachEvent)n.detachEvent("on"+t,i);else{if(r=n._handlers&&n._handlers[t],!r)return;for(u=0;u<r.length;++u)if(r[u]==i){r.splice(u,1);break}}}function p(n,t){var r=n._handlers&&n._handlers[t],u,i;if(r)for(u=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,u)}function k(n,t){function f(n){return function(){n.apply(null,u)}}var r=n._handlers&&n._handlers[t],u,i;if(r)for(u=Array.prototype.slice.call(arguments,2),bt||(++eu,bt=[],setTimeout(fy,0)),i=0;i<r.length;++i)bt.push(f(r[i]))}function lt(n,t){return p(n,t.type,n,t),uy(t)}function fy(){var t,n;for(--eu,t=bt,bt=null,n=0;n<t.length;++n)t[n]()}function kt(n,t){var i=n._handlers&&n._handlers[t];return i&&i.length>0}function ss(){this.id=null}function tr(n,t,i,r,u){t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length));for(var e=r||0,f=u||0;e<t;++e)n.charAt(e)=="\t"?f+=i-f%i:++f;return f}function el(n){while(ou.length<=n)ou.push(b(ou)+" ");return ou[n]}function b(n){return n[n.length-1]}function ol(n){if(rr)n.selectionStart=0,n.selectionEnd=n.value.length;else try{n.select()}catch(t){}}function at(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;++i)if(n[i]==t)return i;return-1}function sl(n,t){function i(){}i.prototype=n;var r=new i;return t&&ne(t,r),r}function ne(n,t){t||(t={});for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function hl(n){for(var t=[],i=0;i<n;++i)t.push(undefined);return t}function ut(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t)}}function te(n){return/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||cl.test(n))}function ll(n){for(var t in n)if(n.hasOwnProperty(t)&&n[t])return!1;return!0}function i(n,t,i,r){var u=document.createElement(n),f;if(i&&(u.className=i),r&&(u.style.cssText=r),typeof t=="string")al(u,t);else if(t)for(f=0;f<t.length;++f)u.appendChild(t[f]);return u}function re(n){for(var t=n.childNodes.length;t>0;--t)n.removeChild(n.firstChild);return n}function ht(n,t){return re(n).appendChild(t)}function al(n,t){d?(n.innerHTML="",n.appendChild(document.createTextNode(t))):n.textContent=t}function l(n){return n.getBoundingClientRect()}function ue(){return!1}function hu(n){if(su!=null)return su;var t=i("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ht(n,t),t.offsetWidth&&(su=t.offsetHeight-t.clientHeight),su||0}function cu(n){if(hs==null){var t=i("span","​");ht(n,i("span",[t,document.createTextNode("x")]));n.firstChild.offsetHeight!=0&&(hs=t.offsetWidth<=1&&t.offsetHeight>2&&!hi)}return hs?i("span","​"):i("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function oy(n,t,i,r){var f,u;if(!n)return r(t,i,"ltr");for(f=0;f<n.length;++f)u=n[f],(u.from<i&&u.to>t||t==i&&u.to==t)&&r(Math.max(u.from,t),Math.min(u.to,i),u.level==1?"rtl":"ltr")}function cs(n){return n.level%2?n.to:n.from}function ls(n){return n.level%2?n.from:n.to}function fe(n){var t=st(n);return t?cs(t[0]):0}function ee(n){var t=st(n);return t?ls(b(t)):n.text.length}function pl(n,i){var e=r(n.doc,i),u=wt(n.doc,e),f,o;return u!=e&&(i=tt(u)),f=st(u),o=f?f[0].level%2?ee(u):fe(u):0,t(i,o)}function sy(n,i){for(var e,u,f,o;e=af(u=r(n.doc,i));)i=e.find().to.line;return f=st(u),o=f?f[0].level%2?fe(u):ee(u):u.text.length,t(i,o)}function hy(n,t,i){var r=n[0].level;return t==r?!0:i==r?!1:t<i}function as(n,t){for(var r,u,i=0;i<n.length;++i){if(u=n[i],u.from<t&&u.to>t)return ir=null,i;if(u.from==t||u.to==t)if(r==null)r=i;else return hy(n,u.level,n[r].level)?(ir=r,i):(ir=i,r)}return ir=null,r}function vs(n,t,i,r){if(!r)return t+i;do t+=i;while(t>0&&ie.test(n.text.charAt(t)));return t}function ys(n,t,i,r){var e=st(n);if(!e)return wl(n,t,i,r);for(var o=as(e,t),u=e[o],f=vs(n,t,u.level%2?-i:i,r);;){if(f>u.from&&f<u.to)return f;if(f==u.from||f==u.to)return as(e,f)==o?f:(u=e[o+=i],i>0==u.level%2?u.to:u.from);if(u=e[o+=i],!u)return null;f=i>0==u.level%2?vs(n,u.to,-1,r):vs(n,u.from,1,r)}}function wl(n,t,i,r){var u=t+i;if(r)while(u>0&&ie.test(n.text.charAt(u)))u+=i;return u<0||u>n.text.length?null:u}var si=/gecko\/\d/i.test(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),hi=c&&(document.documentMode==null||document.documentMode<8),d=c&&(document.documentMode==null||document.documentMode<9),it=/WebKit\//.test(navigator.userAgent),kl=it&&/Qt\/\d+\.\d+/.test(navigator.userAgent),dl=/Chrome\//.test(navigator.userAgent),ft=/Opera\//.test(navigator.userAgent),oe=/Apple Computer/.test(navigator.vendor),se=/KHTML\//.test(navigator.userAgent),gl=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),na=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ta=/PhantomJS/.test(navigator.userAgent),rr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),he=rr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),ci=rr||/Mac/.test(navigator.platform),ia=/windows/i.test(navigator.platform),ur=ft&&navigator.userAgent.match(/Version\/(\d*\.\d*)/),gt,sh,wu,bu,oo,pr,nt,ah,du,ho,gu,ri,of,yo,po,ki,di,sf,hf,ot,vf,ns,pf,kc,w,dc,iu,bt,eu,ei,os,ou,cl,ie,vl,su,hs,dt,ir,bl;ur&&(ur=Number(ur[1]));var ps=ci&&(kl||ft&&(ur==null||ur<12.11)),ce=si||c&&!d,ws=!1,fr=!1;sh=0;oo=0;pr=0;nt=null;c?nt=-.53:si?nt=15:dl?nt=-.7:oe&&(nt=-1/3);du=null;gu=n.changeEnd=function(n){return n.text?t(n.from.line+n.text.length-1,b(n.text).length+(n.text.length==1?n.from.ch:0)):n.to};n.Pos=t;n.prototype={constructor:n,focus:function(){window.focus();g(this);ti(this);lr(this)},setOption:function(n,t){var i=this.options,r=i[n];(i[n]!=t||n=="mode")&&(i[n]=t,ri.hasOwnProperty(n)&&f(this,ri[n])(this,t,r))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,t){this.state.keyMaps[t?"push":"unshift"](n)},removeKeyMap:function(n){for(var i=this.state.keyMaps,t=0;t<i.length;++t)if((typeof n=="string"?i[t].name:i[t])==n)return i.splice(t,1),!0},addOverlay:f(null,function(t,i){var r=t.token?t:n.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:i&&i.opaque});this.state.modeGen++;a(this)}),removeOverlay:f(null,function(n){for(var r,i=this.state.overlays,t=0;t<i.length;++t)if(r=i[t].modeSpec,r==n||typeof n=="string"&&r.name==n){i.splice(t,1);this.state.modeGen++;a(this);return}}),indentLine:f(null,function(n,t,i){typeof t!="string"&&typeof t!="number"&&(t=t==null?this.options.smartIndent?"smart":"prev":t?"add":"subtract");bi(this.doc,n)&&ff(this,n,t,i)}),indentSelection:f(null,function(n){var t=this.doc.sel,r,i;if(s(t.from,t.to))return ff(this,t.from.line,n);for(r=t.to.line-(t.to.ch?0:1),i=t.from.line;i<=r;++i)ff(this,i,n)}),getTokenAt:function(n,t){var e=this.doc,f;n=u(e,n);for(var o=hr(this,n.line,t),s=this.doc.mode,h=r(e,n.line),i=new kr(h.text,this.options.tabSize);i.pos<n.ch&&!i.eol();)i.start=i.pos,f=s.token(i,o);return{start:i.start,end:i.pos,string:i.current(),className:f||null,type:f||null,state:o}},getTokenTypeAt:function(n){var t;n=u(this.doc,n);for(var i=vc(this,r(this.doc,n.line)),f=0,e=(i.length-1)/2,o=n.ch;;)if(t=f+e>>1,(t?i[t*2-1]:0)>=o)e=t;else if(i[t*2+1]<o)f=t+1;else return i[t*2+2]},getStateAfter:function(n,t){var i=this.doc;return n=gh(i,n==null?i.first+i.size-1:n),hr(this,n+1,t)},cursorCoords:function(n,t){var r,i=this.doc.sel;return r=n==null?i.head:typeof n=="object"?u(this.doc,n):n?i.from:i.to,et(this,r,t||"page")},charCoords:function(n,t){return ro(this,u(this.doc,n),t||"page")},coordsChar:function(n,t){return n=eh(this,n,t||"page"),uo(this,n.left,n.top)},lineAtHeight:function(n,t){return n=eh(this,{top:n,left:0},t||"page").top,ru(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,t){var i=!1,u=this.doc.first+this.doc.size-1,f;return n<this.doc.first?n=this.doc.first:n>u&&(n=u,i=!0),f=r(this.doc,n),io(this,r(this.doc,n),{top:0,left:0},t||"page").top+(i?f.height:0)},defaultTextHeight:function(){return ai(this.display)},defaultCharWidth:function(){return oh(this.display)},setGutterMarker:f(null,function(n,t,i){return ef(this,n,function(n){var r=n.gutterMarkers||(n.gutterMarkers={});return r[t]=i,!i&&ll(r)&&(n.gutterMarkers=null),!0})}),clearGutter:f(null,function(n){var i=this,r=i.doc,t=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[n]&&(r.gutterMarkers[n]=null,a(i,t,t+1),ll(r.gutterMarkers)&&(r.gutterMarkers=null));++t})}),addLineClass:f(null,function(n,t,i){return ef(this,n,function(n){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(n[r]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(n[r]))return!1;n[r]+=" "+i}else n[r]=i;return!0})}),removeLineClass:f(null,function(n,t,i){return ef(this,n,function(n){var f=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",u=n[f],r,e;if(u)if(i==null)n[f]=null;else{if(r=u.match(new RegExp("(?:^|\\s+)"+i+"(?:$|\\s+)")),!r)return!1;e=r.index+r[0].length;n[f]=u.slice(0,r.index)+(!r.index||e==u.length?"":" ")+u.slice(e)||null}else return!1;return!0})}),addLineWidget:f(null,function(n,t,i){return wv(this,n,t,i)}),removeLineWidget:function(n){n.clear()},lineInfo:function(n){var t;if(typeof n=="number"){if(!bi(this.doc,n)||(t=n,n=r(this.doc,n),!n))return null}else if(t=tt(n),t==null)return null;return{line:t,handle:n,text:n.text,gutterMarkers:n.gutterMarkers,textClass:n.textClass,bgClass:n.bgClass,wrapClass:n.wrapClass,widgets:n.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(n,t,i,r,f){var s=this.display,o,e,h,c;n=et(this,u(this.doc,n));o=n.bottom;e=n.left;t.style.position="absolute";s.sizer.appendChild(t);r=="over"?o=n.top:(r=="above"||r=="near")&&(h=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),(r=="above"||n.bottom+t.offsetHeight>h)&&n.top>t.offsetHeight?o=n.top-t.offsetHeight:n.bottom+t.offsetHeight<=h&&(o=n.bottom),e+t.offsetWidth>c&&(e=c-t.offsetWidth));t.style.top=o+"px";t.style.left=t.style.right="";f=="right"?(e=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(f=="left"?e=0:f=="middle"&&(e=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=e+"px");i&&sv(this,e,o,e+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:f(null,yh),execCommand:function(n){return hf[n](this)},findPosH:function(n,t,i,r){var o=1,e,f;for(t<0&&(o=-1,t=-t),e=0,f=u(this.doc,n);e<t;++e)if(f=ao(this.doc,f,o,i,r),f.hitSide)break;return f},moveH:f(null,function(n,t){var i=this.doc.sel,r;r=i.shift||i.extend||s(i.from,i.to)?ao(this.doc,i.head,n,t,this.options.rtlMoveVisually):n<0?i.from:i.to;y(this.doc,r,r,n)}),deleteH:f(null,function(n,t){var i=this.doc.sel;s(i.from,i.to)?yt(this.doc,"",i.from,ao(this.doc,i.head,n,t,!1),"+delete"):yt(this.doc,"",i.from,i.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(n,t,i,r){var h=1,o=r,s,f,e;for(t<0&&(h=-1,t=-t),s=0,f=u(this.doc,n);s<t;++s)if(e=et(this,f,"div"),o==null?o=e.left:e.left=o,f=rc(this,e,h,i),f.hitSide)break;return f},moveV:f(null,function(n,t){var i=this.doc.sel,r=et(this,i.head,"div"),u;i.goalColumn!=null&&(r.left=i.goalColumn);u=rc(this,r,n,t);t=="page"&&ic(this,0,ro(this,u,"div").top-r.top);y(this.doc,u,u,n);i.goalColumn=r.left}),toggleOverwrite:function(n){(n==null||n!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:f(null,function(n,t){uf(this,n,t)}),getScrollInfo:function(){var n=this.display.scroller,t=ei;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-t,width:n.scrollWidth-t,clientHeight:n.clientHeight-t,clientWidth:n.clientWidth-t}},scrollIntoView:f(null,function(n,i){var r,f;typeof n=="number"&&(n=t(n,0));i||(i=0);r=n;n&&n.line==null||(this.curOp.scrollToPos=n?u(this.doc,n):this.doc.sel.head,this.curOp.scrollToPosMargin=i,r=et(this,this.curOp.scrollToPos));f=rf(this,r.left,r.top-i,r.right,r.bottom+i);uf(this,f.scrollLeft,f.scrollTop)}),setSize:function(n,t){function i(n){return typeof n=="number"||/^\d+$/.test(String(n))?n+"px":n}n!=null&&(this.display.wrapper.style.width=i(n));t!=null&&(this.display.wrapper.style.height=i(t));this.refresh()},on:function(n,t){e(this,n,t)},off:function(n,t){ct(this,n,t)},operation:function(n){return fo(this,n)},refresh:f(null,function(){li(this);uf(this,this.doc.scrollLeft,this.doc.scrollTop);a(this)}),swapDoc:f(null,function(n){var t=this.doc;return t.cm=null,gc(this,n),li(this),vt(this,!0),uf(this,n.scrollLeft,n.scrollTop),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};ri=n.optionHandlers={};of=n.defaults={};yo=n.Init={toString:function(){return"CodeMirror.Init"}};o("value","",function(n,t){n.setValue(t)},!0);o("mode",null,function(n,t){n.doc.modeOption=t;er(n)},!0);o("indentUnit",2,er,!0);o("indentWithTabs",!1);o("smartIndent",!0);o("tabSize",4,function(n){er(n);li(n);a(n)},!0);o("electricChars",!0);o("rtlMoveVisually",!ia);o("theme","default",function(n){gs(n);or(n)},!0);o("keyMap","default",ds);o("extraKeys",null);o("onKeyEvent",null);o("onDragEvent",null);o("lineWrapping",!1,ua,!0);o("gutters",[],function(n){ae(n.options);or(n)},!0);o("fixedGutter",!0,function(n,t){n.display.gutters.style.left=t?be(n.display)+"px":"0";n.refresh()},!0);o("coverGutterNextToScrollbar",!1,ve,!0);o("lineNumbers",!1,function(n){ae(n.options);or(n)},!0);o("firstLineNumber",1,or,!0);o("lineNumberFormatter",function(n){return n},or,!0);o("showCursorWhenSelecting",!1,de,!0);o("readOnly",!1,function(n,t){t=="nocursor"?(so(n),n.display.input.blur()):t||vt(n,!0)});o("dragDrop",!0);o("cursorBlinkRate",530);o("cursorScrollMargin",0);o("cursorHeight",1);o("workTime",100);o("workDelay",100);o("flattenSpans",!0);o("pollInterval",100);o("undoDepth",40,function(n,t){n.doc.history.undoDepth=t});o("historyEventDelay",500);o("viewportMargin",10,function(n){n.refresh()},!0);o("maxHighlightLength",1e4,function(n){er(n);n.refresh()},!0);o("moveInputWithCursor",!0,function(n,t){t||(n.display.inputDiv.style.top=n.display.inputDiv.style.left=0)});o("tabindex",null,function(n,t){n.display.input.tabIndex=t||""});o("autofocus",null);po=n.modes={};ki=n.mimeModes={};n.defineMode=function(t,i){if(n.defaults.mode||t=="null"||(n.defaults.mode=t),arguments.length>2){i.dependencies=[];for(var r=2;r<arguments.length;++r)i.dependencies.push(arguments[r])}po[t]=i};n.defineMIME=function(n,t){ki[n]=t};n.resolveMode=function(t){if(typeof t=="string"&&ki.hasOwnProperty(t))t=ki[t];else if(t&&typeof t.name=="string"&&ki.hasOwnProperty(t.name)){var i=ki[t.name];t=sl(i,t);t.name=i.name}else if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return n.resolveMode("application/xml");return typeof t=="string"?{name:t}:t||{name:"null"}};n.getMode=function(t,i){var e,r,f,u;if(i=n.resolveMode(i),e=po[i.name],!e)return n.getMode(t,"text/plain");if(r=e(t,i),di.hasOwnProperty(i.name)){f=di[i.name];for(u in f)f.hasOwnProperty(u)&&(r.hasOwnProperty(u)&&(r["_"+u]=r[u]),r[u]=f[u])}return r.name=i.name,r};n.defineMode("null",function(){return{token:function(n){n.skipToEnd()}}});n.defineMIME("text/plain","null");di=n.modeExtensions={};n.extendMode=function(n,t){var i=di.hasOwnProperty(n)?di[n]:di[n]={};ne(t,i)};n.defineExtension=function(t,i){n.prototype[t]=i};n.defineDocExtension=function(n,t){w.prototype[n]=t};n.defineOption=o;sf=[];n.defineInitHook=function(n){sf.push(n)};n.copyState=gi;n.startState=uc;n.innerMode=function(n,t){while(n.innerMode){var i=n.innerMode(t);t=i.state;n=i.mode}return i||{mode:n,state:t}};hf=n.commands={selectAll:function(n){n.setSelection(t(n.firstLine(),0),t(n.lastLine()))},killLine:function(n){var i=n.getCursor(!0),r=n.getCursor(!1),u=!s(i,r);u||n.getLine(i.line).length!=i.ch?n.replaceRange("",i,u?r:t(i.line),"+delete"):n.replaceRange("",i,t(i.line+1,0),"+delete")},deleteLine:function(n){var i=n.getCursor().line;n.replaceRange("",t(i,0),t(i),"+delete")},delLineLeft:function(n){var i=n.getCursor();n.replaceRange("",t(i.line,0),i,"+delete")},undo:function(n){n.undo()},redo:function(n){n.redo()},goDocStart:function(n){n.extendSelection(t(n.firstLine(),0))},goDocEnd:function(n){n.extendSelection(t(n.lastLine()))},goLineStart:function(n){n.extendSelection(pl(n,n.getCursor().line))},goLineStartSmart:function(n){var i=n.getCursor(),r=pl(n,i.line),f=n.getLineHandle(r.line),e=st(f),u,o;e&&e[0].level!=0?n.extendSelection(r):(u=Math.max(0,f.text.search(/\S/)),o=i.line==r.line&&i.ch<=u&&i.ch,n.extendSelection(t(r.line,o?0:u)))},goLineEnd:function(n){n.extendSelection(sy(n,n.getCursor().line))},goLineRight:function(n){var t=n.charCoords(n.getCursor(),"div").top+5;n.extendSelection(n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(n){var t=n.charCoords(n.getCursor(),"div").top+5;n.extendSelection(n.coordsChar({left:0,top:t},"div"))},goLineUp:function(n){n.moveV(-1,"line")},goLineDown:function(n){n.moveV(1,"line")},goPageUp:function(n){n.moveV(-1,"page")},goPageDown:function(n){n.moveV(1,"page")},goCharLeft:function(n){n.moveH(-1,"char")},goCharRight:function(n){n.moveH(1,"char")},goColumnLeft:function(n){n.moveH(-1,"column")},goColumnRight:function(n){n.moveH(1,"column")},goWordLeft:function(n){n.moveH(-1,"word")},goGroupRight:function(n){n.moveH(1,"group")},goGroupLeft:function(n){n.moveH(-1,"group")},goWordRight:function(n){n.moveH(1,"word")},delCharBefore:function(n){n.deleteH(-1,"char")},delCharAfter:function(n){n.deleteH(1,"char")},delWordBefore:function(n){n.deleteH(-1,"word")},delWordAfter:function(n){n.deleteH(1,"word")},delGroupBefore:function(n){n.deleteH(-1,"group")},delGroupAfter:function(n){n.deleteH(1,"group")},indentAuto:function(n){n.indentSelection("smart")},indentMore:function(n){n.indentSelection("add")},indentLess:function(n){n.indentSelection("subtract")},insertTab:function(n){n.replaceSelection("\t","end","+input")},defaultTab:function(n){n.somethingSelected()?n.indentSelection("add"):n.replaceSelection("\t","end","+input")},transposeChars:function(n){var i=n.getCursor(),r=n.getLine(i.line);i.ch>0&&i.ch<r.length-1&&n.replaceRange(r.charAt(i.ch)+r.charAt(i.ch-1),t(i.line,i.ch-1),t(i.line,i.ch+1))},newlineAndIndent:function(n){f(n,function(){n.replaceSelection("\n","end","+input");n.indentLine(n.getCursor().line,null,!0)})()},toggleOverwrite:function(n){n.toggleOverwrite()}};ot=n.keyMap={};ot.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};ot.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};ot.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};ot["default"]=ci?ot.macDefault:ot.pcDefault;ot.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};n.lookupKey=br;n.isModifierKey=fc;n.keyName=ec;n.fromTextArea=function(t,i){function f(){t.value=r.getValue()}var o,u,s,h,r;if(i||(i={}),i.value=t.value,!i.tabindex&&t.tabindex&&(i.tabindex=t.tabindex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),i.autofocus==null){o=document.body;try{o=document.activeElement}catch(c){}i.autofocus=o==t||t.getAttribute("autofocus")!=null&&o==document.body}if(t.form&&(e(t.form,"submit",f),!i.leaveSubmitMethodAlone)){u=t.form;s=u.submit;try{h=u.submit=function(){f();u.submit=s;u.submit();u.submit=h}}catch(c){}}return t.style.display="none",r=n(function(n){t.parentNode.insertBefore(n,t.nextSibling)},i),r.save=f,r.getTextArea=function(){return t},r.toTextArea=function(){f();t.parentNode.removeChild(r.getWrapperElement());t.style.display="";t.form&&(ct(t.form,"submit",f),typeof t.form.submit=="function"&&(t.form.submit=s))},r};kr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(n){var t=this.string.charAt(this.pos),i;return i=typeof n=="string"?t==n:t&&(n.test?n.test(t):n(t)),i?(++this.pos,t):void 0},eatWhile:function(n){for(var t=this.pos;this.eat(n););return this.pos>t},eatSpace:function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},skipToEnd:function(){this.pos=this.string.length},skipTo:function(n){var t=this.string.indexOf(n,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(n){this.pos-=n},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=tr(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return tr(this.string,null,this.tabSize)},match:function(n,t,i){var u,f,r;if(typeof n=="string"){if(u=function(n){return i?n.toLowerCase():n},f=this.string.substr(this.pos,n.length),u(f)==u(n))return t!==!1&&(this.pos+=n.length),!0}else return(r=this.string.slice(this.pos).match(n),r&&r.index>0)?null:(r&&t!==!1&&(this.pos+=r[0].length),r)},current:function(){return this.string.slice(this.start,this.pos)}};n.StringStream=kr;n.TextMarker=ui;ui.prototype.clear=function(){var n,f,r,e,i,u,t,o,s;if(!this.explicitlyCleared){for(n=this.doc.cm,f=n&&!n.curOp,f&&vi(n),r=null,e=null,t=0;t<this.lines.length;++t)i=this.lines[t],u=gr(i.markedSpans,this),u.to!=null&&(e=tt(i)),i.markedSpans=lv(i.markedSpans,u),u.from!=null?r=tt(i):this.collapsed&&!fi(this.doc,i)&&n&&rt(i,ai(n.display));if(n&&this.collapsed&&!n.options.lineWrapping)for(t=0;t<this.lines.length;++t)o=wt(n.doc,this.lines[t]),s=lu(n.doc,o),s>n.display.maxLineLength&&(n.display.maxLine=o,n.display.maxLineLength=s,n.display.maxLineChanged=!0);r!=null&&n&&a(n,r,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,n&&nc(n));f&&yi(n);k(this,"clear")}};ui.prototype.find=function(){for(var u,n,f,i,e,r=0;r<this.lines.length;++r)u=this.lines[r],n=gr(u.markedSpans,this),(n.from!=null||n.to!=null)&&(f=tt(u),n.from!=null&&(i=t(f,n.from)),n.to!=null&&(e=t(f,n.to)));return this.type=="bookmark"?i:i&&{from:i,to:e}};ui.prototype.changed=function(){var u=this.find(),n=this.doc.cm,i,t;if(u&&n&&(i=r(this.doc,u.from.line),wa(n,i),u.from.line>=n.display.showingFrom&&u.from.line<n.display.showingTo)){for(t=n.display.lineDiv.firstChild;t;t=t.nextSibling)if(t.lineObj==i){t.offsetHeight!=i.height&&rt(i,t.offsetHeight);break}fo(n,function(){n.curOp.selectionChanged=!0})}};ui.prototype.attachLine=function(n){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&at(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(n)};ui.prototype.detachLine=function(n){if(this.lines.splice(at(this.lines,n),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};n.SharedTextMarker=cf;cf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var n=0;n<this.markers.length;++n)this.markers[n].clear();k(this,"clear")}};cf.prototype.find=function(){return this.primary.find()};vf=n.LineWidget=function(n,t,i){for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.cm=n;this.node=t};vf.prototype.clear=cc(function(){var n=this.line.widgets,i=tt(this.line),t;if(i!=null&&n){for(t=0;t<n.length;++t)n[t]==this&&n.splice(t--,1);n.length||(this.line.widgets=null);rt(this.line,Math.max(0,this.line.height-yf(this)));a(this.cm,i,i+1)}});vf.prototype.changed=cc(function(){var i=this.height,n,t;(this.height=null,n=yf(this)-i,n)&&(rt(this.line,this.line.height+n),t=tt(this.line),a(this.cm,t,t+1))});ns={};pf=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;wf.prototype={chunkSize:function(){return this.lines.length},removeInner:function(n,t){for(var r,i=n,u=n+t;i<u;++i)r=this.lines[i],this.height-=r.height,kv(r),k(r,"delete");this.lines.splice(n,t)},collapse:function(n){n.splice.apply(n,[n.length,0].concat(this.lines))},insertInner:function(n,t,i){this.height+=i;this.lines=this.lines.slice(0,n).concat(t).concat(this.lines.slice(n));for(var r=0,u=t.length;r<u;++r)t[r].parent=this},iterN:function(n,t,i){for(var r=n+t;n<r;++n)if(i(this.lines[n]))return!0}};tu.prototype={chunkSize:function(){return this.size},removeInner:function(n,t){var r,i,u,f,o,e;for(this.size-=t,r=0;r<this.children.length;++r)if(i=this.children[r],u=i.chunkSize(),n<u){if(f=Math.min(t,u-n),o=i.height,i.removeInner(n,f),this.height-=o-i.height,u==f&&(this.children.splice(r--,1),i.parent=null),(t-=f)==0)break;n=0}else n-=u;this.size-t<25&&(e=[],this.collapse(e),this.children=[new wf(e)],this.children[0].parent=this)},collapse:function(n){for(var t=0,i=this.children.length;t<i;++t)this.children[t].collapse(n)},insertInner:function(n,t,i){var u,o,r,e,s,f;for(this.size+=t.length,this.height+=i,u=0,o=this.children.length;u<o;++u){if(r=this.children[u],e=r.chunkSize(),n<=e){if(r.insertInner(n,t,i),r.lines&&r.lines.length>50){while(r.lines.length>50)s=r.lines.splice(r.lines.length-25,25),f=new wf(s),r.height-=f.height,this.children.splice(u+1,0,f),f.parent=this;this.maybeSpill()}break}n-=e}},maybeSpill:function(){var n,r,t,i,u;if(!(this.children.length<=10)){n=this;do r=n.children.splice(n.children.length-5,5),t=new tu(r),n.parent?(n.size-=t.size,n.height-=t.height,u=at(n.parent.children,n),n.parent.children.splice(u+1,0,t)):(i=new tu(n.children),i.parent=n,n.children=[i,t],n=i),t.parent=n.parent;while(n.children.length>10);n.parent.maybeSpill()}},iterN:function(n,t,i){for(var f,u,e,r=0,o=this.children.length;r<o;++r)if(f=this.children[r],u=f.chunkSize(),n<u){if(e=Math.min(t,u-n),f.iterN(n,e,i))return!0;if((t-=e)==0)break;n=0}else n-=u}};kc=0;w=n.Doc=function(n,i,r){if(!(this instanceof w))return new w(n,i,r);r==null&&(r=0);tu.call(this,[new wf([nu("",null)])]);this.first=r;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=kf();this.cleanGeneration=1;this.frontier=r;var u=t(r,0);this.sel={from:u,to:u,head:u,anchor:u,shift:!1,extend:!1,goalColumn:null};this.id=++kc;this.modeOption=i;typeof n=="string"&&(n=dt(n));is(this,{from:u,to:u,text:n},null,{head:u,anchor:u})};w.prototype=sl(tu.prototype,{constructor:w,iter:function(n,t,i){i?this.iterN(n-this.first,t-n,i):this.iterN(this.first,this.first+this.size,n)},insert:function(n,t){for(var r=0,i=0,u=t.length;i<u;++i)r+=t[i].height;this.insertInner(n-this.first,t,r)},remove:function(n,t){this.removeInner(n-this.first,t)},getValue:function(n){var t=us(this,this.first,this.first+this.size);return n===!1?t:t.join(n||"\n")},setValue:function(n){var i=t(this.first,0),u=this.first+this.size-1;wi(this,{from:i,to:t(u,r(this,u).text.length),text:dt(n),origin:"setValue"},{head:i,anchor:i},!0)},replaceRange:function(n,t,i,r){t=u(this,t);i=i?u(this,i):t;yt(this,n,t,i,r)},getRange:function(n,t,i){var r=rs(this,u(this,n),u(this,t));return i===!1?r:r.join(i||"\n")},getLine:function(n){var t=this.getLineHandle(n);return t&&t.text},setLine:function(n,i){bi(this,n)&&yt(this,i,t(n,0),u(this,t(n)))},removeLine:function(n){n?yt(this,"",u(this,t(n-1)),u(this,t(n))):yt(this,"",t(0,0),u(this,t(1,0)))},getLineHandle:function(n){if(bi(this,n))return r(this,n)},getLineNumber:function(n){return tt(n)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(n){return u(this,n)},getCursor:function(n){var t=this.sel,i;return i=n==null||n=="head"?t.head:n=="anchor"?t.anchor:n=="end"||n===!1?t.to:t.from,ii(i)},somethingSelected:function(){return!s(this.sel.head,this.sel.anchor)},setCursor:cr(function(n,i,r){var f=u(this,typeof n=="number"?t(n,i||0):n);r?y(this,f):pt(this,f,f)}),setSelection:cr(function(n,t){pt(this,u(this,n),u(this,t||n))}),extendSelection:cr(function(n,t){y(this,u(this,n),t&&u(this,t))}),getSelection:function(n){return this.getRange(this.sel.from,this.sel.to,n)},replaceSelection:function(n,t,i){wi(this,{from:this.sel.from,to:this.sel.to,text:dt(n),origin:i},t||"around")},undo:cr(function(){kh(this,"undo")}),redo:cr(function(){kh(this,"redo")}),setExtending:function(n){this.sel.extend=n},historySize:function(){var n=this.history;return{undo:n.done.length,redo:n.undone.length}},clearHistory:function(){this.history=kf(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(n){return this.history.generation==(n||this.cleanGeneration)},getHistory:function(){return{done:df(this.history.done),undone:df(this.history.undone)}},setHistory:function(n){var t=this.history=kf(this.history.maxGeneration);t.done=n.done.slice(0);t.undone=n.undone.slice(0)},markText:function(n,t,i){return dr(this,u(this,n),u(this,t),i,"range")},setBookmark:function(n,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft};return n=u(this,n),dr(this,n,n,i,"bookmark")},findMarksAt:function(n){var e,i,f,t;if(n=u(this,n),e=[],i=r(this,n.line).markedSpans,i)for(f=0;f<i.length;++f)t=i[f],(t.from==null||t.from<=n.ch)&&(t.to==null||t.to>=n.ch)&&e.push(t.marker.parent||t.marker);return e},getAllMarks:function(){var n=[];return this.iter(function(t){var r=t.markedSpans,i;if(r)for(i=0;i<r.length;++i)r[i].from!=null&&n.push(r[i].marker)}),n},posFromIndex:function(n){var i,r=this.first;return this.iter(function(t){var u=t.text.length+1;if(u>n)return i=n,!0;n-=u;++r}),u(this,t(r,i))},indexFromPos:function(n){n=u(this,n);var t=n.ch;return n.line<this.first||n.ch<0?0:(this.iter(this.first,n.line,function(n){t+=n.text.length+1}),t)},copy:function(n){var t=new w(us(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},n&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(n){var t,r,i;return n||(n={}),t=this.first,r=this.first+this.size,n.from!=null&&n.from>t&&(t=n.from),n.to!=null&&n.to<r&&(r=n.to),i=new w(us(this,t,r),n.mode||this.modeOption,t),n.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:n.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:n.sharedHist}],i},unlinkDoc:function(t){var i,u,r;if(t instanceof n&&(t=t.doc),this.linked)for(i=0;i<this.linked.length;++i)if(u=this.linked[i],u.doc==t){this.linked.splice(i,1);t.unlinkDoc(this);break}t.history==this.history&&(r=[t.id],nr(t,function(n){r.push(n.id)},!0),t.history=kf(),t.history.done=df(this.history.done,r),t.history.undone=df(this.history.undone,r))},iterLinkedDocs:function(n){nr(this,n)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});w.prototype.eachLine=w.prototype.iter;dc="iter insert remove copy getEditor".split(" ");for(iu in w.prototype)w.prototype.hasOwnProperty(iu)&&at(dc,iu)<0&&(n.prototype[iu]=function(n){return function(){return n.apply(this.doc,arguments)}}(w.prototype[iu]));n.e_stop=fu;n.e_preventDefault=v;n.e_stopPropagation=ul;eu=0;n.on=e;n.off=ct;n.signal=p;ei=30;os=n.Pass={toString:function(){return"CodeMirror.Pass"}};ss.prototype={set:function(n,t){clearTimeout(this.id);this.id=setTimeout(t,n)}};n.countColumn=tr;ou=[""];cl=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;ie=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;n.replaceGetRect=function(n){l=n};vl=function(){if(d)return!1;var n=i("div");return"draggable"in n||"dragDrop"in n}();si?ue=function(n,t){return n.charCodeAt(t-1)==36&&n.charCodeAt(t)==39}:oe&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ue=function(n,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(n.slice(t-1,t+1))}:it&&(ue=function(n,t){return t>1&&n.charCodeAt(t-1)==45&&/\w/.test(n.charAt(t-2))&&/[^\-?\.]/.test(n.charAt(t))?!0:/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(n.slice(t-1,t+1))});dt="\n\nb".split(/\n/).length!=3?function(n){for(var i=0,f=[],e=n.length,t,r,u;i<=e;)t=n.indexOf("\n",i),t==-1&&(t=n.length),r=n.slice(i,n.charAt(t-1)=="\r"?t-1:t),u=r.indexOf("\r"),u!=-1?(f.push(r.slice(0,u)),i+=u+1):(f.push(r),i=t+1);return f}:function(n){return n.split(/\r\n?|\n/)};n.splitLines=dt;var ey=window.getSelection?function(n){try{return n.selectionStart!=n.selectionEnd}catch(t){return!1}}:function(n){try{var t=n.ownerDocument.selection.createRange()}catch(i){}return!t||t.parentElement()!=n?!1:t.compareEndPoints("StartToEnd",t)!=0},yl=function(){var n=i("div");return"oncopy"in n?!0:(n.setAttribute("oncopy","return;"),typeof n.oncopy=="function")}(),oi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return n.keyNames=oi,function(){for(var n=0;n<10;n++)oi[n+48]=String(n);for(n=65;n<=90;n++)oi[n]=String.fromCharCode(n);for(n=1;n<=12;n++)oi[n+111]=oi[n+63235]="F"+n}(),bl=function(){function o(n){return n<=255?f.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?e.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var f="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",e="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,u=/[1n]/,n="L";return function(f){var a,h,p,nt,k,l,y,v,d,e,tt,w,g,c,it;if(!s.test(f))return!1;for(a=f.length,h=[],e=0;e<a;++e)h.push(l=o(f.charCodeAt(e)));for(e=0,p=n;e<a;++e)l=h[e],l=="m"?h[e]=p:p=l;for(e=0,k=n;e<a;++e)l=h[e],l=="1"&&k=="r"?h[e]="n":i.test(l)&&(k=l,l=="r"&&(h[e]="R"));for(e=1,p=h[0];e<a-1;++e)l=h[e],l=="+"&&p=="1"&&h[e+1]=="1"?h[e]="1":l==","&&p==h[e+1]&&(p=="1"||p=="n")&&(h[e]=p),p=l;for(e=0;e<a;++e)if(l=h[e],l==",")h[e]="N";else if(l=="%"){for(y=e+1;y<a&&h[y]=="%";++y);for(nt=e&&h[e-1]=="!"||y<a-1&&h[y]=="1"?"1":"N",c=e;c<y;++c)h[c]=nt;e=y-1}for(e=0,k=n;e<a;++e)l=h[e],k=="L"&&l=="1"?h[e]="L":i.test(l)&&(k=l);for(e=0;e<a;++e)if(t.test(h[e])){for(y=e+1;y<a&&t.test(h[y]);++y);var rt=(e?h[e-1]:n)=="L",ut=(y<a-1?h[y]:n)=="L",nt=rt||ut?"L":"R";for(c=e;c<y;++c)h[c]=nt;e=y-1}for(v=[],e=0;e<a;)if(r.test(h[e])){for(tt=e,++e;e<a&&r.test(h[e]);++e);v.push({from:tt,to:e,level:0})}else{for(w=e,g=v.length,++e;e<a&&h[e]!="L";++e);for(c=w;c<e;)if(u.test(h[c])){for(w<c&&v.splice(g,0,{from:w,to:c,level:1}),it=c,++c;c<e&&u.test(h[c]);++c);v.splice(g,0,{from:it,to:c,level:2});w=c}else++c;w<e&&v.splice(g,0,{from:w,to:e,level:1})}return v[0].level==1&&(d=f.match(/^\s+/))&&(v[0].from=d[0].length,v.unshift({from:0,to:d[0].length,level:0})),b(v).level==1&&(d=f.match(/\s+$/))&&(b(v).to-=d[0].length,v.push({from:a-d[0].length,to:a,level:0})),v[0].level!=b(v).level&&v.push({from:a,to:a,level:v[0].level}),v}}(),n.version="3.14.0",n}();CodeMirror.defineMode("sql",function(n,t){"use strict";function r(n,t){var r=n.next(),y,e;if(f[r]&&(y=f[r](n,t),y!==!1))return y;if(i.hexNumber==!0&&(r=="0"&&n.match(/^[xX][0-9a-fA-F]+/)||(r=="x"||r=="X")&&n.match(/^'[0-9a-fA-F]+'/))||i.binaryNumber==!0&&((r=="b"||r=="B")&&n.match(/^'[01]+'/)||r=="0"&&n.match(/^b[01]+/)))return"number";if(r.charCodeAt(0)>47&&r.charCodeAt(0)<58)return n.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),i.decimallessFloat==!0&&n.eat("."),"number";if(r=="?"&&(n.eatSpace()||n.eol()||n.eat(";")))return"variable-3";if(r=="'"||r=='"'&&i.doubleQuote)return t.tokenize=a(r),t.tokenize(n,t);if((i.nCharCast==!0&&(r=="n"||r=="N")||i.charsetCast==!0&&r=="_"&&n.match(/[a-z][a-z0-9]*/i))&&(n.peek()=="'"||n.peek()=='"'))return"keyword";if(/^[\(\),\;\[\]]/.test(r))return null;if(i.commentSlashSlash&&r=="/"&&n.eat("/")||i.commentHash&&r=="#"||r=="-"&&n.eat("-")&&(!i.commentSpaceRequired||n.eat(" ")))return n.skipToEnd(),"comment";if(r=="/"&&n.eat("*"))return t.tokenize=v,t.tokenize(n,t);if(r=="."){if(i.zerolessFloat==!0&&n.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(i.ODBCdotTable==!0&&n.match(/^[a-zA-Z_]+/))return"variable-2"}else return u.test(r)?(n.eatWhile(u),null):r=="{"&&(n.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||n.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/))?"number":(n.eatWhile(/^[_\w\d]/),e=n.current().toLowerCase(),l.hasOwnProperty(e)&&(n.match(/^( )+'[^']*'/)||n.match(/^( )+"[^"]*"/)))?"number":s.hasOwnProperty(e)?"atom":h.hasOwnProperty(e)?"builtin":c.hasOwnProperty(e)?"keyword":o.hasOwnProperty(e)?"string-2":null}function a(n){return function(t,i){for(var u=!1,f;(f=t.next())!=null;){if(f==n&&!u){i.tokenize=r;break}u=!u&&f=="\\"}return"string"}}function v(n,t){for(;;)if(n.skipTo("*")){if(n.next(),n.eat("/")){t.tokenize=r;break}}else{n.skipToEnd();break}return"comment"}function e(n,t,i){t.context={prev:t.context,indent:n.indentation(),col:n.column(),type:i}}function y(n){n.indent=n.context.indent;n.context=n.context.prev}var o=t.client||{},s=t.atoms||{"false":!0,"true":!0,"null":!0},h=t.builtin||{},c=t.keywords||{},u=t.operatorChars||/^[*+\-%<>!=&|~^]/,i=t.support||{},f=t.hooks||{},l=t.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:r,context:null}},token:function(n,t){var i,r;return(n.sol()&&t.context&&t.context.align==null&&(t.context.align=!1),n.eatSpace())?null:(i=t.tokenize(n,t),i=="comment")?i:(t.context&&t.context.align==null&&(t.context.align=!0),r=n.current(),r=="("?e(n,t,")"):r=="["?e(n,t,"]"):t.context&&t.context.type==r&&y(t),i)},indent:function(t,i){var r=t.context;return r?r.align?r.col+(i.charAt(0)==r.type?0:1):r.indent+n.indentUnit:CodeMirror.Pass}}}),function(){"use strict";function i(n){for(var t;(t=n.next())!=null;)if(t=="`"&&!n.eat("`"))return"variable-2";return null}function r(n){return(n.eat("@")&&(n.match(/^session\./),n.match(/^local\./),n.match(/^global\./)),n.eat("'"))?(n.match(/^.*'/),"variable-2"):n.eat('"')?(n.match(/^.*"/),"variable-2"):n.eat("`")?(n.match(/^.*`/),"variable-2"):n.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function u(n){return n.eat("N")?"atom":n.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function n(n){for(var i={},r=n.split(" "),t=0;t<r.length;++t)i[r[t]]=!0;return i}var t="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";CodeMirror.defineMIME("text/x-sql",{name:"sql",keywords:n(t+"begin"),builtin:n("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:n("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:n("date time timestamp"),support:n("ODBCdotTable doubleQuote binaryNumber hexNumber")});CodeMirror.defineMIME("text/x-mysql",{name:"sql",client:n("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:n(t+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:n("bool boolean bit blob decimal double enum float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:n("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:n("date time timestamp"),support:n("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":i,"\\":u}});CodeMirror.defineMIME("text/x-mariadb",{name:"sql",client:n("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:n(t+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:n("bool boolean bit blob decimal double enum float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:n("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:n("date time timestamp"),support:n("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":r,"`":i,"\\":u}});CodeMirror.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:n("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:n("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),atoms:n("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:n("commentSlashSlash decimallessFloat"),hooks:{}});CodeMirror.defineMIME("text/x-plsql",{name:"sql",client:n("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:n("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),functions:n("abs acos add_months ascii asin atan atan2 average bfilename ceil chartorowid chr concat convert cos cosh count decode deref dual dump dup_val_on_index empty error exp false floor found glb greatest hextoraw initcap instr instrb isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mod months_between new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null nvl others power rawtohex reftohex round rowcount rowidtochar rpad rtrim sign sin sinh soundex sqlcode sqlerrm sqrt stddev substr substrb sum sysdate tan tanh to_char to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid upper user userenv variance vsize"),builtin:n("bfile blob character clob dec float int integer mlslabel natural naturaln nchar nclob number numeric nvarchar2 real rowtype signtype smallint string varchar varchar2"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:n("date time timestamp"),support:n("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")})}();
/*
//# sourceMappingURL=query.min.js.map
*/